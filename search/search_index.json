{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>Welcome to the TidyBot++ documentation! This website hosts the hardware assembly guide and usage instructions for our open-source robot.</p> Kinova Franka ARX5 <p>This table summarizes what is included in our open-source release:</p> Arm Hardware design Phone teleoperation Policy learning Kinova \u2714\ufe0f \u2714\ufe0f \u2714\ufe0f Franka \u2714\ufe0f ARX5 \u2714\ufe0f \u2714\ufe0f xArm \u2714\ufe0f UR5 \u2714\ufe0f ViperX \u2714\ufe0f <p>In the sections below, we describe each of these components in more detail.</p>"},{"location":"#hardware-design","title":"Hardware design","text":"<p>Our open-source robot is highly customizable, having been designed from the ground up to maximize research productivity. To accommodate diverse research needs, we provide three reference designs of different sizes (shown in the photos above). These designs can be used directly or serve as starting points for further customization.</p> <p>The following table summarizes the main differences between the three designs:</p> Design Intended use Dimensions Weight Battery capacity Runtime ARX5 ~5 kg arm(ARX5, ViperX) 40 x 44 x 37.5 cm 26 kg 288 Wh 4.5 hr Kinova ~10 kg arm(Kinova, xArm) 50 x 54 x 37.5 cm 34 kg 768 Wh 8 hr Franka ~20 kg arm(Franka, UR5) 50 x 54 x 44.5 cm 45 kg 2160 Wh 8 hr <p>Note</p> <p>The dimensions (W x L x H) and weight are for the mobile base (arm not included). The capacity and runtime are for the camping battery, which powers the mounted arm and onboard computer.</p> <p>Below is a size comparison of the three different frame designs:</p> <p></p> <p>We also provide mounting instructions for three other arms on the Arm mounting page. Each requires only minor modifications to the appropriately-sized reference design:</p> xArm UR5 ViperX <p>To get started building your own TidyBot++ robot, please proceed to the BOM page to purchase the required parts. The entire assembly process typically takes around 10 hours, which can be completed over 1-2 days. If this is your first time, you might want to allocate a few extra days.</p> <p>For those looking to customize our reference designs, we provide the relevant CAD files below:</p> Kinova Franka ARX5 Caster module [Onshape] [STEP] [Onshape] [STEP] [Onshape] [STEP] [Onshape] [STEP]"},{"location":"#phone-teleoperation","title":"Phone teleoperation","text":"<p>We open source our intuitive phone teleoperation interface, shown below (4x speed):</p> <p>This interface was used in our paper experiments to collect data for policy training. Detailed instructions for using the interface can be found in the Usage guide.</p> <p>We used the Kinova arm in our experiments, but the interface can be adapted for other arms as well by swapping out the arm controller. We did this for the ARX5 arm, as shown below (4x speed):</p>"},{"location":"#policy-learning","title":"Policy learning","text":"<p>Using teleoperation data, we trained diffusion policies to execute tasks autonomously, as shown below (2x speed):</p> <p>We have open sourced the full learning pipeline we used, including policy training and policy inference. Detailed instructions can be found in the codebase README. While we have only tested the pipeline with the Kinova arm, it should work with other arms as well with minimal modifications.</p>"},{"location":"#contact","title":"Contact","text":"<p>We hope this project can serve as a valuable resource for the robot learning community, and we're always looking to improve this documentation. If you have any questions, comments, or suggestions, please feel free to reach out by:</p> <ul> <li>Sending an email to Jimmy Wu</li> <li>Creating an issue on GitHub</li> <li>Filling out the anonymous feedback form</li> </ul>"},{"location":"arm-mounting/","title":"Arm mounting","text":"<p>This page provides instructions for mounting an arm onto the mobile base.</p> <p>Note</p> <p>Make sure the mobile base controller is set up and functioning correctly before mounting an arm, as erratic base movements can damage a mounted arm.</p>"},{"location":"arm-mounting/#arm-mounting_1","title":"Arm mounting","text":"KinovaFrankaARX5xArmUR5ViperX <p>Install four M6 roll-in T-nuts into the top crossbars using the T-nut alignment jig and the mounting plate alignment jig:</p> <p> </p> <p>Secure the Kinova mounting plate to the frame with four M6 25mm flat head screws:</p> <p></p> <p>Tip</p> <p>These screws should tighten smoothly but are very sensitive to misalignment. If you find a screw difficult to turn, loosen it, wiggle the mounting plate to correct the alignment, then try again.</p> <p>Secure the power adapter on the right side of the base using four 20mm gussets, zip ties, and Velcro cable ties:</p> <p></p> <p>Secure the E-stop next to the power adapter using zip ties:</p> <p> </p> <p>Note</p> <p>We used this zip tie arrangement:</p> <p></p> <p>Note</p> <p>The E-stop is mounted at an angle against the rails so that it does not move when pressed.</p> <p>Note</p> <p>We intentionally avoid mounting the E-stop on top of the mobile base to prevent it from being misconstrued as an E-stop for the mobile base.</p> <p>Tuck the power cable into the space around the power adapter:</p> <p></p> <p>Connect the AC power cord:</p> <p></p> <p>Connect the Ethernet cable:</p> <p></p> <p>Install the top acrylic plates using M5 8mm screws:</p> <p></p> <p>Arm mounting complete:</p> <p></p> <p>Install the top acrylic plates using M5 8mm screws:</p> <p></p> <p>Secure the control box to the top of the frame with two rope ratchets:</p> <p></p> <p>Install four M6 slide-in T-nuts into the front crossbars:</p> <p></p> <p>Tip</p> <p>We provide an alignment jig to help align the T-nuts with the base flange screw holes.</p> <p>Secure the Franka base flange to the frame using four M6 14mm socket head cap screws and four M6 washers (OD 15.9mm):</p> <p></p> <p>Connect all cables:</p> <p></p> <p>Arm mounting complete:</p> <p></p> <p>Install the arm and the riser onto the mounting plate using four M3 100mm screws:</p> <p> </p> <p>Note</p> <p>The riser elevates the base of the arm by 9 cm.</p> <p>Secure the power adapter to the back of the frame using two 20mm gussets and four zip ties:</p> <p> </p> <p>Connect the AC power cord:</p> <p></p> <p>Connect the CAN adapter:</p> <p></p> <p>Note</p> <p>These photos show the AC outlets of the portable power station on the side of the mobile base, but they should actually be on the front.</p> <p>Place the top acrylic plate onto the frame and route the cables through the mounting hole:</p> <p></p> <p>Note</p> <p>Do not install the screws for the top plate yet.</p> <p>Install four M6 roll-in T-nuts into the top crossbars:</p> <p></p> <p>Secure the ARX5 mounting plate to the frame using four M6 16mm screws, then plug the connector into the arm:</p> <p></p> <p>Check that no cables are caught between the top acrylic plate and the frame, then secure the plate with M5 8mm screws:</p> <p></p> <p>Note</p> <p>These instructions assume the \"Kinova\" mobile base reference design.</p> <p>Adjust the top crossbars so that their centers are 95.3 mm apart, then install four M5 roll-in T-nuts:</p> <p></p> <p>Secure the xArm base flange to the frame using four M5 10mm socket head cap screws:</p> <p></p> <p>Secure the power adapter with a rope ratchet:</p> <p></p> <p>Connect all cables:</p> <p></p> <p>Arm mounting complete:</p> <p></p> <p>Note</p> <p>These instructions assume the \"Franka\" mobile base reference design.</p> <p>Adjust the front crossbars so that their centers are 93.3 mm apart, then install four M6 slide-in T-nuts:</p> <p></p> <p>Secure the UR5 base flange to the frame with four M6 25mm socket head cap screws and eight M6 washers:</p> <p></p> <p>Secure the control box with two rope ratchets:</p> <p></p> <p>Connect all cables:</p> <p></p> <p>Arm mounting complete:</p> <p></p> <p>Note</p> <p>These instructions assume the \"ARX5\" mobile base reference design.</p> <p>Adjust the top crossbars so that their centers are 190 mm apart, then install four M5 roll-in T-nuts:</p> <p></p> <p>Secure the ViperX base plate to the frame using four M5 14mm screws:</p> <p></p> <p>Secure the power adapter to the frame with a rope ratchet:</p> <p></p> <p>Connect all cables:</p> <p></p> <p>Note</p> <p>These photos show the AC outlets of the portable power station on the side of the mobile base, but they should actually be on the front.</p> <p>Arm mounting complete:</p> <p></p>"},{"location":"arm-mounting/#wrist-camera","title":"Wrist camera","text":"<p>Each of our reference designs includes a wrist camera on the arm, equipped with a fisheye lens to increase the field of view. The steps below describe how to install these components onto your arm.</p> <p>First, install the fisheye lens onto the wrist camera:</p> Kinova cameraLogitech cameraOther <p>Use the Kinova fisheye mount to install the fisheye lens. See video (2x speed):</p> <p></p> <p>Here are example views from the Kinova camera, with and without the fisheye lens:</p> <p> </p> <p>Use the Logitech fisheye mount to install the fisheye lens. See video (2x speed):</p> <p></p> <p>Note</p> <p>Make sure the bottom clip of the fisheye mount is fully inserted into the notch beneath the camera. This helps to align the fisheye center with the camera center.</p> <p>Here are example views from the Logitech camera, with and without the fisheye lens:</p> <p> </p> <p>Note</p> <p>When using the image from the Logitech camera, you may want to crop out the black portions on the sides.</p> <p>For other cameras, we provide the CAD file for the fisheye lens mounting ring, which you can use as a starting point to design your own mount:</p> Fisheye mount [STEP] <p>Note</p> <p>Design your mount so that the bottom of the mounting ring sits flush with the front surface of your camera.</p> <p>Note</p> <p>The circular part of the 3D-printed fisheye mount has very precise features. To ensure proper installation, be sure to fully remove all support material. We recommend using a pick for easier removal.</p> <p>Note</p> <p>The fisheye lens mounting ring can be installed in two different orientations (180\u00b0 apart). Since the lens may not be symmetrical, make sure to keep the orientation consistent if you remove and remount the lens after collecting data.</p> <p>Next, install the camera with the fisheye lens onto the wrist of the arm:</p> KinovaFrankaARX5Other <p>For the Kinova arm, we use the integrated wrist camera, so no camera mount is needed. Simply install the fisheye lens mount directly onto the camera:</p> <p></p> <p>Insert the Logitech camera into the Franka wrist camera mount to verify the fit:</p> <p></p> <p>Note</p> <p>Make sure the camera is fully inserted into the mount like in the photo above. The mount contains an integrated shim that inserts into the hinge to keep the camera angle fixed.</p> <p>Install the mount on top of the gripper using an M6 22mm socket head cap screw:</p> <p></p> <p>Note</p> <p>Since the camera blocks the screw hole, you'll need to remove the camera to install the mount and then reinsert it.</p> <p>Note</p> <p>The camera is mounted upside down on the gripper so that the gripper fingertips are visible in the camera image.</p> <p>Insert the Logitech camera into the top part of the ARX5 wrist camera mount:</p> <p></p> <p>Note</p> <p>Make sure the camera is fully inserted into the mount like in the photo above. The mount contains an integrated shim that inserts into the hinge to keep the camera angle fixed.</p> <p>Install the bottom part of the camera mount:</p> <p></p> <p>Note</p> <p>The bottom part of the mount prevents the camera from sliding out.</p> <p>Install the mount above the gripper using the M3 screws included with the arm:</p> <p></p> <p>Note</p> <p>We highly recommend using Velcro cable ties for cable management to provide strain relief.</p> <p>Check for maximum strain by moving joint 2 to its limits:</p> <p></p> <p>Check the limits of the wrist joints (4, 5, and 6) as well:</p> <p> </p> <p>Final result after cable management:</p> <p></p> <p>For other arms, we provide CAD files for a minimal Logitech camera mount, which you can adapt to design your own wrist camera mount:</p> Logitech camera mount (top) Logitech camera mount (bottom) [STEP] [STEP]"},{"location":"bom/","title":"Bill of materials (BOM)","text":"<p>This page provides the complete list of parts needed to build the TidyBot++ open-source robot. The BOM includes approximately 50 parts which can be purchased online from seven vendors: CTRE, WCP, SDS, AndyMark, Amazon, TAP Plastics, and Xometry. Placing these orders online typically takes around 30 minutes.</p> <p>Note</p> <p>When ordering, please double-check that the product page matches the BOM item description, especially for Amazon links. While the provided URLs are current as of October 2024, links may change and redirect to different items. For example, if the BOM specifies M6 screws but the URL opens a page for M3 screws, the link may have been modified.</p> <p>In addition, there are a few parts that require 3D printing or laser cutting, as well as a single machined part which can be ordered from Xometry. Detailed instructions for preparing these parts are provided in the Manufacturing section below.</p> <p>There is a separate BOM for each of the three reference designs. Please make sure that the correct tab (Kinova, Franka, or ARX5) is selected below.</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>We also provide the BOM for each reference design in spreadsheet format:</p> <ul> <li>BOM - Kinova</li> <li>BOM - Franka</li> <li>BOM - ARX5</li> <li>BOM - Tools</li> </ul> <p>Note</p> <p>The BOM spreadsheets are provided for reference only. We highly recommend directly using this webpage to order parts, as it contains the most complete information.</p>"},{"location":"bom/#main-components","title":"Main components","text":"KinovaFrankaARX5 <p>Total cost of mobile base: $5,379.63</p> Item Unit Cost Quantity Total Cost Notes Kinova arm 1 We used the Gen3 7-DoF arm with a Robotiq 2F-85 gripper Drive system $4,370.92 1 $4,370.92 See Drive system section Frame $390.35 1 $390.35 See Frame section Arm mounting hardware $20.26 1 $20.26 See Arm mounting hardware section Portable power station $399.00[Amazon] 1 $399.00 For powering the arm and onboard compute. See component notes for more details. Accessories $67.93 1 $67.93 See Accessories section Mini PC 1 Onboard computer for running low-level control. See component notes for more details. GPU laptop 1 Used for onboard or offboard policy inference. A GPU workstation could also work but would not be as portable. Wi-Fi router 1 For communication with the onboard computer Wireless gamepad $38.19[Amazon] 1 $38.19 For joystick teleop of the mobile base Logitech C930e webcam $79.99[Amazon] 1 $79.99 Forward-facing onboard camera for the mobile base with wide (90-degree) field of view. Note: Watch out for fakes, see component notes for more details. Fisheye lens attachment $12.99[Amazon] 1 $12.99 For expanding the field of view of the wrist camera <p>Total cost of mobile base: $6,272.77</p> Item Unit Cost Quantity Total Cost Notes Franka arm 1 We used the FR3 arm with Franka Hand gripper Drive system $4,396.05 1 $4,396.05 See Drive system section Frame $379.07 1 $379.07 See Frame section Arm mounting hardware $19.56 1 $19.56 See Arm mounting hardware section Portable power station $1,199.00[Amazon] 1 $1,199.00 For powering the arm and onboard compute. See component notes for more details. Accessories $67.93 1 $67.93 See Accessories section Mini PC 1 Onboard computer for running low-level control. See component notes for more details. GPU laptop 1 Used for onboard or offboard policy inference. A GPU workstation could also work but would not be as portable. Wi-Fi router 1 For communication with the onboard computer Wireless gamepad $38.19[Amazon] 1 $38.19 For joystick teleop of the mobile base Logitech C930e webcam $79.99[Amazon] 2 $159.98 Two wide (90-degree) field of view cameras: (1) forward-facing onboard camera for the mobile base, and (2) wrist camera for the arm. Note: Watch out for fakes, see component notes for more details. Fisheye lens attachment $12.99[Amazon] 1 $12.99 For expanding the field of view of the wrist camera <p>Total cost of mobile base: $5,205.71</p> Item Unit Cost Quantity Total Cost Notes ARX5 arm 1 We used the L5 model from October 2024 Drive system $4,410.91 1 $4,410.91 See Drive system section Frame $285.21 1 $285.21 See Frame section Arm mounting hardware $30.51 1 $30.51 See Arm mounting hardware section Portable power station $199.99[Amazon] 1 $199.99 For powering the arm and onboard compute. See component notes for more details. Accessories $67.93 1 $67.93 See Accessories section Mini PC 1 Onboard computer for running low-level control. See component notes for more details. GPU laptop 1 Used for onboard or offboard policy inference. A GPU workstation could also work but would not be as portable. Wi-Fi router 1 For communication with the onboard computer Wireless gamepad $38.19[Amazon] 1 $38.19 For joystick teleop of the mobile base Logitech C930e webcam $79.99[Amazon] 2 $159.98 Two wide (90-degree) field of view cameras: (1) forward-facing onboard camera for the mobile base, and (2) wrist camera for the arm. Note: Watch out for fakes, see component notes for more details. Fisheye lens attachment $12.99[Amazon] 1 $12.99 For expanding the field of view of the wrist camera"},{"location":"bom/#drive-system","title":"Drive system","text":"KinovaFrankaARX5 <p>Total cost of drive system: $4,370.92</p> <p>Total cost of drive system: $4,396.05</p> <p>Total cost of drive system: $4,410.91</p>"},{"location":"bom/#caster-modules","title":"Caster modules","text":"Item Unit Cost Quantity Total Cost Notes MK4 swerve module $300.00[SDS] 4 $1,200.00 Make sure to select \"Kraken X60\", NOT \"Falcon 500\". Select these options: Kraken X60, L1, Colson. If you purchase the Falcon version by accident, please contact the vendor to correct the order. Kraken X60 motor $199.99[WCP] [CTRE] 8 $1,599.92 All academic institutions can use the same academic pricing as FRC teams ($199.99). For non-academic use, please contact the vendor directly. CANcoder encoder $89.99[CTRE] 4 $359.96 Make sure to select the \"Wired\" option, NOT the \"Standard\" option. The wired option comes with pre-soldered wires. MK4 motor riser kit $28.00[SDS] 4 $112.00 Make sure to select \"Kraken X60\", NOT \"Falcon 500\" Custom machined shaft $15.00[Xometry] 4 $60.00 See Machining section for more details <p>Note</p> <p>Please double-check the selected options for these caster module parts very carefully. If you select the default options, you may receive parts that do not fit.</p> <p>Tip</p> <p>While we have not encountered any reliability issues with these parts so far, it is still a good idea to keep a few spares on hand, especially the motors and encoders.</p>"},{"location":"bom/#power-system","title":"Power system","text":"KinovaFrankaARX5 Item Unit Cost Quantity Total Cost Notes Sealed lead acid (SLA) batteries $99.99[WCP] [REV] [AndyMark] 1 $99.99 These MK ES17-12 batteries are sold in pairs so quantity 1 gives you 2 batteries. Battery cable $19.00[AndyMark] 2 $38.00 One battery cable per battery Battery charger $94.00[AndyMark] 1 $94.00 Power cable and 120A breaker kit $76.75[AndyMark] 1 $76.75 Select these options: (1) 6 AWG Jacket With SB50, (2) 12 in., (3) 5 in. Power distribution panel (PDP) $204.99[CTRE] 1 $204.99 40A Snap Action breaker $7.00[AndyMark] 8 $56.00 For powering the motors 5A Snap Action breaker $6.40[AndyMark] 1 $6.40 For powering the encoders 22 AWG wire $9.98[Amazon] 1 $9.98 For powering the encoders 5-port wire connectors $8.22[Amazon] 1 $8.22 For powering the encoders. 10-pack, 2 will be used. Inline wire connectors $13.75[Amazon] 1 $13.75 For powering the encoders. 20-pack, 6 will be used. PDP WAGO tool $12.99[CTRE] 1 $12.99 For opening the WAGO connectors on the PDP Battery flag $1.50[AndyMark] 2 $3.00 For marking SLA batteries after they have been charged Item Unit Cost Quantity Total Cost Notes Sealed lead acid (SLA) batteries $99.99[WCP] [REV] [AndyMark] 1 $99.99 These MK ES17-12 batteries are sold in pairs so quantity 1 gives you 2 batteries. Battery cable $19.00[AndyMark] 2 $38.00 One battery cable per battery Battery charger $94.00[AndyMark] 1 $94.00 Power cable and 120A breaker kit $76.75[AndyMark] 1 $76.75 Select these options: (1) 6 AWG Jacket With SB50, (2) 12 in., (3) 5 in. Power distribution panel (PDP) $204.99[CTRE] 1 $204.99 40A Snap Action breaker $7.00[AndyMark] 8 $56.00 For powering the motors 5A Snap Action breaker $6.40[AndyMark] 1 $6.40 For powering the encoders 22 AWG wire $9.98[Amazon] 1 $9.98 For powering the encoders 5-port wire connectors $8.22[Amazon] 1 $8.22 For powering the encoders. 10-pack, 2 will be used. Inline wire connectors $13.75[Amazon] 1 $13.75 For powering the encoders. 20-pack, 6 will be used. PDP WAGO tool $12.99[CTRE] 1 $12.99 For opening the WAGO connectors on the PDP Battery flag $1.50[AndyMark] 2 $3.00 For marking SLA batteries after they have been charged 10 AWG wire $16.88[Amazon] 1 $16.88 For extending the motor power cables 10 AWG wire connectors $8.25[Amazon] 1 $8.25 For extending the motor power cables. 10-pack, 8 will be used. Item Unit Cost Quantity Total Cost Notes Sealed lead acid (SLA) battery $69.99[GMI Energy] [Batteries Plus] 2 $139.98 We use smaller batteries in this design due to limited space in the smaller frame Battery cable $19.00[AndyMark] 2 $38.00 One battery cable per battery Battery charger $94.00[AndyMark] 1 $94.00 Power cable and 120A breaker kit $76.75[AndyMark] 1 $76.75 Select these options: (1) 6 AWG Jacket With SB50, (2) 12 in., (3) 5 in. Power distribution panel (PDP) $204.99[CTRE] 1 $204.99 40A Snap Action breaker $7.00[AndyMark] 8 $56.00 For powering the motors 5A Snap Action breaker $6.40[AndyMark] 1 $6.40 For powering the encoders 22 AWG wire $9.98[Amazon] 1 $9.98 For powering the encoders 5-port wire connectors $8.22[Amazon] 1 $8.22 For powering the encoders. 10-pack, 2 will be used. Inline wire connectors $13.75[Amazon] 1 $13.75 For powering the encoders. 20-pack, 6 will be used. PDP WAGO tool $12.99[CTRE] 1 $12.99 For opening the WAGO connectors on the PDP Battery flag $1.50[AndyMark] 2 $3.00 For marking SLA batteries after they have been charged"},{"location":"bom/#can-system","title":"CAN system","text":"Item Unit Cost Quantity Total Cost Notes Windows computer 1 Windows is only needed for initial setup of the motors and encoders with the Phoenix Tuner X application. Our low-level control codebase uses Ubuntu. CANivore USB-to-CAN adapter $299.99[CTRE] 1 $299.99 For communication with the motors and encoders Phoenix Pro license $100.00[CTRE] 1 $100.00 Select the \"2024 CANivore Bus x2\" option, NOT the \"Single Device\" or \"Season Pass\" options. This software license enables field-oriented control (FOC) on the motors. CAN bus and power cable kit $9.99[CTRE] 1 $9.99 For connecting the CANivore USB-to-CAN adapter at one end of the bus and the termination resistor at the other end 120 Ohm resistor $4.99[CTRE] 1 $4.99 CAN bus termination resistor"},{"location":"bom/#frame","title":"Frame","text":"KinovaFrankaARX5 <p>Total cost of frame: $390.35</p> Item Unit Cost Quantity Total Cost Notes 2020 500mm T-slot extrusions $30.99[Amazon] 4 $123.96 16 total, 13 will be used 2020 250mm T-slot extrusions $16.99[Amazon] 1 $16.99 4-pack, all will be used 2020 28mm gussets $12.99[Amazon] 3 $38.97 30 total, 24 will be used. Screws and slide-in T-nuts are included. 2020 20mm gussets $7.99[Amazon] 1 $7.99 50-pack, 8 will be used 2020 90 degree plates $15.99[Amazon] 3 $47.97 30 total, 24 will be used 2020 20mm corner brackets $8.99[Amazon] 1 $8.99 10-pack, 8 will be used 2020 M5 slide-in T-nuts $14.59[Amazon] 3 $43.77 300 total, 228 will be used M5 8mm screws $8.99[Amazon] 2 $17.98 200 total, 174 will be used M5 10mm screws $9.29[Amazon] 1 $9.29 100 total, 54 will be used 2020 M5 roll-in T-nuts $16.68[Amazon] 1 $16.68 100-pack, can be useful if you forget to pre-install a slide-in T-nut 6mm clear acrylic sheet (550 x 510 mm) $35.40[TAP Plastics] 1 $35.40 For the laser-cut bottom acrylic plate 3mm white acrylic sheet (550 x 230 mm) $11.18[TAP Plastics] 2 $22.36 For the laser-cut top acrylic plates. The exact color we used was \"Lightning White 45%\". <p></p> <p>Total cost of frame: $379.07</p> Item Unit Cost Quantity Total Cost Notes 2020 500mm T-slot extrusions $30.99[Amazon] 4 $123.96 16 total, all will be used 2020 300mm T-slot extrusions $17.99[Amazon] 1 $17.99 4-pack, all will be used 2020 28mm gussets $12.99[Amazon] 2 $25.98 20 total, all will be used. Screws and slide-in T-nuts are included. 2020 20mm gussets $7.99[Amazon] 1 $7.99 50-pack, 8 will be used 2020 90 degree plates $15.99[Amazon] 2 $31.98 20 total, all will be used 2020 20mm corner brackets $8.99[Amazon] 4 $35.96 40 total, 32 will be used 2020 M5 slide-in T-nuts $14.59[Amazon] 3 $43.77 300 total, 243 will be used M5 8mm screws $8.99[Amazon] 3 $26.97 300 total, 197 will be used M5 10mm screws $9.29[Amazon] 1 $9.29 100 total, 46 will be used 2020 M5 roll-in T-nuts $16.68[Amazon] 1 $16.68 100-pack, can be useful if you forget to pre-install a slide-in T-nut 6mm clear acrylic sheet (160 x 310 mm) $11.80[TAP Plastics] 2 $23.60 For the laser-cut bottom acrylic plates 3mm white acrylic sheet (117 x 510 mm) $7.88[TAP Plastics] 1 $7.88 For the laser-cut top acrylic plates. The exact color we used was \"Lightning White 45%\". 3mm white acrylic sheet (103 x 510 mm) $7.02[TAP Plastics] 1 $7.02 For the laser-cut top acrylic plates. The exact color we used was \"Lightning White 45%\". <p></p> <p>Total cost of frame: $285.21</p> Item Unit Cost Quantity Total Cost Notes 2020 400mm T-slot extrusions $18.99[Amazon] 3 $56.97 12 total, all will be used 2020 250mm T-slot extrusions $16.99[Amazon] 1 $16.99 4-pack, all will be used 2020 28mm gussets $12.99[Amazon] 2 $25.98 20 total, 16 will be used. Screws and slide-in T-nuts are included. 2020 20mm gussets $7.99[Amazon] 1 $7.99 50-pack, 8 will be used 2020 90 degree plates $15.99[Amazon] 2 $31.98 20 total, all will be used 2020 tee plates $9.99[Amazon] 1 $9.99 10-pack, 2 will be used 2020 20mm corner brackets $8.99[Amazon] 1 $8.99 10-pack, 8 will be used 2020 M5 slide-in T-nuts $14.59[Amazon] 3 $43.77 300 total, 207 will be used M5 8mm screws $8.99[Amazon] 2 $17.98 200 total, 158 will be used M5 10mm screws $9.29[Amazon] 1 $9.29 100 total, 49 will be used 2020 M5 roll-in T-nuts $16.68[Amazon] 1 $16.68 100-pack, can be useful if you forget to pre-install a slide-in T-nut 6mm clear acrylic sheet (450 x 410 mm) $23.60[TAP Plastics] 1 $23.60 For the laser-cut bottom acrylic plate 3mm white acrylic sheet (450 x 410 mm) $15.00[TAP Plastics] 1 $15.00 For the laser-cut top acrylic plate. The exact color we used was \"Lightning White 45%\"."},{"location":"bom/#arm-mounting-hardware","title":"Arm mounting hardware","text":"KinovaFrankaARX5xArmUR5ViperX <p>Total cost of arm mounting hardware: $20.26</p> Item Unit Cost Quantity Total Cost Notes 2020 M6 roll-in T-nuts $11.99[Amazon] 1 $11.99 For securing the Kinova mounting plate to the frame M6 25mm flat head screws $8.27[Amazon] 1 $8.27 For securing the Kinova mounting plate to the frame <p>Total cost of arm mounting hardware: $19.56</p> Item Unit Cost Quantity Total Cost Notes 2020 M6 slide-in T-nuts $5.99[Amazon] 1 $5.99 For securing the Franka base flange to the frame M6 14mm socket head cap screws $7.78[Amazon] 1 $7.78 For securing the Franka base flange to the frame M6 washers (OD 15.9mm) $5.79[Amazon] 1 $5.79 For securing the Franka base flange to the frame <p>Total cost of arm mounting hardware: $30.51</p> Item Unit Cost Quantity Total Cost Notes 2020 M6 roll-in T-nuts $11.99[Amazon] 1 $11.99 For securing the ARX5 mounting plate to the frame M6 16mm screws $8.54[Amazon] 1 $8.54 For securing the ARX5 mounting plate to the frame M3 100mm screws $9.98[Amazon] 1 $9.98 For installing a riser between the base of the ARX5 arm and the mounting plate Item Unit Cost Quantity Total Cost Notes M5 10mm socket head cap screws $9.02[Amazon] 1 $9.02 For securing the xArm base flange to the frame Item Unit Cost Quantity Total Cost Notes 2020 M6 slide-in T-nuts $5.99[Amazon] 1 $5.99 For securing the UR5 base flange to the frame M6 25mm socket head cap screws $8.99[Amazon] 1 $8.99 For securing the UR5 base flange to the frame M6 washers (OD 12mm) $4.57[Amazon] 1 $4.57 For securing the UR5 base flange to the frame Item Unit Cost Quantity Total Cost Notes M5 14mm screws $8.46[Amazon] 1 $8.46 For securing the ViperX base plate to the frame"},{"location":"bom/#accessories","title":"Accessories","text":"<p>Total cost of accessories: $67.93</p> Item Unit Cost Quantity Total Cost Notes Rope ratchets $22.99[Amazon] 1 $22.99 For securing components to the frame to prevent movement during operation Cable sleeves $8.99[Amazon] 1 $8.99 For organizing CAN bus cables Velcro cable ties $10.98[Amazon] 1 $10.98 Zip ties $3.99[Amazon] 1 $3.99 USB hub $14.99[Amazon] 1 $14.99 This makes it easier to plug peripherals into the onboard mini PC HDMI extender $5.99[Amazon] 1 $5.99 This makes it easier to plug a monitor into the onboard mini PC"},{"location":"bom/#tools","title":"Tools","text":"Item Unit Cost Quantity Total Cost Notes 3D printer 1 We recommend using a Bambu Lab or Original Prusa printer PLA filament (white) 1 PLA filament (black) 1 Pliers 1 For 3D print support removal Hook and pick set $8.09[Amazon] 1 $8.09 For 3D print support removal Imperial hex T-handles $52.12[Amazon] 1 $52.12 For caster module assembly Metric hex T-handles $40.96[Amazon] 1 $40.96 For frame assembly Hex key set $31.19[Amazon] 1 $31.19 Phillips screwdriver (#1) 1 For encoder assembly Torx screwdriver (T9, T10) 1 For motor assembly Socket wrench set 1 For power system assembly Loctite 609 retaining compound $16.05[Amazon] 1 $16.05 For caster module assembly Loctite 243 threadlocker $16.42[Amazon] 1 $16.42 For caster module assembly White lithium grease $7.99[Amazon] 1 $7.99 For lubricating caster module gears Wire stripper $10.99[Amazon] 1 $10.99 For encoder power cables (22 AWG solid) Large-gauge wire stripper $12.14[Amazon] 1 $12.14 For motor power cables (10 AWG stranded) Electrical tape (black, red) 1 For power system assembly Straightedge (50cm) 1 For aligning the wheels when setting encoder magnet offsets. You can also just use an extra T-slot extrusion. <p>Note</p> <p>The imperial and metric hex tools are NOT interchangeable. Please make sure you have both sets. Using one in place of the other can result in stripped screws.</p>"},{"location":"bom/#manufacturing","title":"Manufacturing","text":""},{"location":"bom/#3d-printing","title":"3D printing","text":"<p>Estimated time: 3 days</p> <p>We provide STL files for our 3D-printed parts below, along with the required quantities for each. All parts can be printed with PLA filament on a consumer-grade 3D printer. Please make sure to enable supports where specified.</p> <p>Note</p> <p>We have tested a variety of 3D printers to verify that our parts can be easily reproduced in other labs. We recommend using a printer from Bambu Lab or Original Prusa for high print quality, speed, and overall ease of use. We do not recommend using a Creality Ender series printer.</p> KinovaFrankaARX5 Item Quantity Notes Wheel mount A 4 Note: Printing this structural component requires special attention. Please see the Wheel mount printing section for more details. Wheel mount B 4 Note: Printing this structural component requires special attention. Please see the Wheel mount printing section for more details. Breaker terminal spacer 1 For covering the exposed terminals of the 5A breaker in the power distribution panel (PDP) Caster module alignment jig 1 (Optional) Helpful for installing caster modules into the frame Wheel alignment jig 2 For setting the encoder magnet offsets Battery mount (left) 1 For securing the SLA battery to the frame. Print with supports enabled. Battery mount (right) 1 For securing the SLA battery to the frame. Print with supports enabled. Base camera mount (top) 1 For attaching the base camera to the frame. Print with supports enabled. Base camera mount (bottom) 1 For attaching the base camera to the frame. Print with supports enabled. Base camera mount shim 1 For keeping the base camera angle fixed Kinova mounting plate alignment jig 1 (Optional) Helpful for mounting the Kinova arm on the frame Kinova T-nut alignment jig 1 (Optional) Helpful for mounting the Kinova arm on the frame Kinova fisheye mount 1 For mounting a fisheye lens on the Kinova wrist camera. Print with supports enabled. Item Quantity Notes Wheel mount A 4 Note: Printing this structural component requires special attention. Please see the Wheel mount printing section for more details. Wheel mount B 4 Note: Printing this structural component requires special attention. Please see the Wheel mount printing section for more details. Breaker terminal spacer 1 For covering the exposed terminals of the 5A breaker in the power distribution panel (PDP) Caster module alignment jig 1 (Optional) Helpful for installing caster modules into the frame Wheel alignment jig 2 For setting the encoder magnet offsets Bottom plate support bracket 4 For installing the bottom acrylic plates. Print with supports enabled. Battery mount (left) 1 For securing the SLA battery to the frame Battery mount (right) 1 For securing the SLA battery to the frame Base camera mount (top) 1 For attaching the base camera to the frame. Print with supports enabled. Base camera mount (bottom) 1 For attaching the base camera to the frame. Print with supports enabled. Base camera mount shim 1 For keeping the base camera angle fixed Logitech fisheye mount 1 For mounting a fisheye lens on the wrist camera. Print with supports enabled. Wrist camera mount 1 For mounting the wrist camera on the arm. Print with supports enabled. Item Quantity Notes Wheel mount A 4 Note: Printing this structural component requires special attention. Please see the Wheel mount printing section for more details. Wheel mount B 4 Note: Printing this structural component requires special attention. Please see the Wheel mount printing section for more details. Breaker terminal spacer 1 For covering the exposed terminals of the 5A breaker in the power distribution panel (PDP) Caster module alignment jig 1 (Optional) Helpful for installing caster modules into the frame Wheel alignment jig 2 For setting the encoder magnet offsets Battery mount 1 For securing the SLA battery to the frame. Print with supports enabled. Base camera mount (top) 1 For attaching the base camera to the frame. Print with supports enabled. Base camera mount (bottom) 1 For attaching the base camera to the frame. Print with supports enabled. Base camera mount shim 1 For keeping the base camera angle fixed ARX5 riser 1 For increasing the elevation of the arm's base Logitech fisheye mount 1 For mounting a fisheye lens on the wrist camera. Print with supports enabled. Wrist camera mount (top) 1 For mounting the wrist camera on the arm. Print with supports enabled. Wrist camera mount (bottom) 1 For mounting the wrist camera on the arm. Print with supports enabled. <p>Note</p> <p>All STL files are in their intended print orientation. You should not need to reorient any of them.</p> <p>Tip</p> <p>Some of the support material may be difficult to remove by hand. We recommend using pliers and picks for easier removal.</p>"},{"location":"bom/#laser-cutting","title":"Laser cutting","text":"<p>Estimated time: 30 minutes</p> <p>We use laser-cut acrylic plates on the top and bottom of our mobile base. The 6mm bottom plate supports internal components, while the 3mm top plate prevents objects from falling into the robot. We purchase cut-to-size acrylic sheets from TAP Plastics (as specified in the BOM) and laser cut them into final plate designs.</p> <p>Note</p> <p>If you do not have access to a laser cutter, you can order pre-cut plates from a service like Xometry, but expect to pay roughly 4x the cost of buying uncut sheets.</p> <p>Below are the DXF drawings for each plate, along with the corresponding uncut sheet dimensions:</p> KinovaFrankaARX5 Top (left) Top (right) Bottom 3mm white550 x 230 mm[DXF] 3mm white550 x 230 mm[DXF] 6mm clear550 x 510 mm[DXF] <p>Note</p> <p>If the bottom plate exceeds the bed size of your laser cutter, you can cut each half separately using these drawings:</p> Bottom (back) Bottom (front) 6mm clear275 x 510 mm[DXF] 6mm clear275 x 510 mm[DXF] Top (center) Top (front) Bottom (back) Bottom (front) 3mm white117 x 510 mm[DXF] 3mm white103 x 510 mm[DXF] 6mm clear160 x 310 mm[DXF] 6mm clear160 x 310 mm[DXF] Top Bottom 3mm white450 x 410 mm[DXF] 6mm clear450 x 410 mm[DXF] <p>Note</p> <p>All sheet dimensions are specified as (x, y), where x is the horizontal dimension.</p> <p>Note</p> <p>The sheet dimensions include a 5mm margin on each side to be trimmed during the cutting process. When cutting, position the drawing slightly inside the sheet's edge to account for this margin.</p>"},{"location":"bom/#machining","title":"Machining","text":"<p>Our mobile base requires 4 custom shafts (one per caster module) which can be machined by a manufacturing service like Xometry. To place your order on Xometry, you will need to provide the following information:</p> 3D model 2D drawing Specifications [STEP] [PDF] [PDF] <p>Note</p> <p>Due to the high setup costs of CNC machining, the unit cost of manufacturing this part drops dramatically with larger quantities: the 1st piece costs almost $100 whereas the 20th piece costs only $5. Therefore, instead of ordering just 4 pieces (which would cost $50 per piece), we recommend coordinating with other labs to place a large group order. For example, by ordering 24 pieces (for 6 robots), the cost drops to $15 per piece.</p> <p>Note</p> <p>We used Xometry's \"International Economy\" option, which offers the lowest overall cost and arrives 2\u20133 weeks after the order is placed.</p> <p>Note</p> <p>If you need shafts urgently and are located near Stanford, feel free to reach out as we may have some extras on hand.</p>"},{"location":"bom/#component-notes","title":"Component notes","text":""},{"location":"bom/#portable-power-station","title":"Portable power station","text":"<p>Selection criteria</p> <p>The portable power station (camping battery) supplies power to the arm and onboard compute. Our reference designs link to the exact models we used, but many other models can also work. When choosing a battery, these are the main criteria we consider:</p> <ol> <li> <p>Can it power the arm and onboard compute?</p> <p>The battery must have pure sine wave AC outlets, as well as sufficient capacity and power output for both the arm and the onboard computer.</p> </li> <li> <p>Is it fast-charging?</p> <p>This criterion is often overlooked but quickly eliminates most candidates. Many camping batteries require more than 8 hours to recharge, which can severely limit productivity as the robot remains immobile while plugged in for charging. To maximize uptime, we highly recommend using a battery that can recharge in 1 hour.</p> </li> <li> <p>Will it fit inside the frame?</p> <p>To verify whether a battery might fit, we note the approximate dimensions (L x W x H) of the available space in the center of the frame and narrow down the options accordingly.</p> </li> </ol> <p>Substitutions</p> <p>Below, we list potential substitutes for each reference design:</p> KinovaFrankaARX5 <p>Available space: 16.5\" x 10\" x 9.8\" (42 x 25.3 x 25 cm)</p> <p>Potential candidates:</p> <ul> <li>EcoFlow RIVER 2 Pro (768 Wh)</li> <li>EcoFlow RIVER 2 Max (512 Wh)</li> <li>Jackery Explorer 600 Plus (632 Wh)</li> <li>EcoFlow RIVER Pro (720 Wh)</li> <li>EcoFlow DELTA Mini (882 Wh)</li> </ul> <p>Available space: 16.5\" x 10\" x 12.6\" (42 x 25.3 x 32 cm)</p> <p>Potential candidates:</p> <ul> <li>Jackery Explorer 2000 Pro (2160 Wh)</li> <li>EcoFlow DELTA 2 Max (2048 Wh)</li> <li>EcoFlow DELTA Max (2048 Wh)</li> </ul> <p>Available space: 12.6\" x 6\" x 9.6\" (32 x 15.3 x 24.4 cm)</p> <p>Potential candidates:</p> <ul> <li>Anker SOLIX C300 (288 Wh)</li> <li>EcoFlow RIVER 3 Plus (286 Wh)</li> <li>Jackery Explorer 300 Plus (288 Wh)</li> <li>EcoFlow RIVER 3 (245 Wh)</li> <li>Jackery Explorer 240 v2 (256 Wh)</li> <li>EcoFlow RIVER 2 (256 Wh)</li> </ul> <p>Note</p> <p>Product listings may contain inaccurate dimensions. While the listed batteries likely fit, most of them have not been individually confirmed.</p> <p>Note</p> <p>The provided dimensions are not hard limits. Certain features, such as handles, can exceed the limits without interfering with the frame.</p> <p>We have verified a few camping batteries as viable substitutes. These are listed below (click to expand), along with the modifications needed to accommodate them.</p> FrankaARX5 EcoFlow DELTA 2 Max (2048 Wh) [Amazon] <p>Compared to the camping battery used in our reference design, the DELTA 2 Max is much wider and requires several modifications to incorporate:</p> <ul> <li>Order slightly larger acrylic sheets (6mm clear) for the bottom plates: 185 x 310 mm instead of 160 x 310 mm.</li> <li>Use the modified DXF drawings below when laser cutting the acrylic bottom plates.</li> <li>Move crossbars at the bottom of the frame closer together: 150 mm instead of 200 mm.</li> <li>Mount the PDP on the back rather than the left side.</li> <li>Use longer motor power cable extensions: 15 cm instead of 10 cm.</li> <li>Use longer wires from PDP to encoder power harness: 55 cm instead of 45 cm.</li> <li>Use right-angle plug adapters so that power cords do not protrude from the side of the robot.</li> </ul> <p>DXF drawings for the larger acrylic bottom plates:</p> Bottom (back) Bottom (front) 6mm clear185 x 310 mm[DXF] 6mm clear185 x 310 mm[DXF] <p>Securing the battery to the frame (7 rope ratchets):</p> <p> </p> <p>Mounting the PDP on the back side:</p> <p> </p> <p>CAN bus wiring:</p> <p> </p> EcoFlow RIVER 2 (256 Wh) [Amazon] <p>This battery has lower capacity (256 Wh) compared to the one used in our reference design (288 Wh). No modifications are needed. Below are photos showing how to secure it to the frame with a single rope ratchet:</p> <p> </p>"},{"location":"bom/#mini-pc","title":"Mini PC","text":"<p>The onboard mini PC is a dedicated computer for running robot controllers. It typically operates in headless mode with no monitor attached. We connect to it via SSH and use <code>tmux</code> to maintain persistent sessions.</p> <p>Note</p> <p>To minimize latency spikes in the control loop, we recommend running all other tasks on a separate computer, such as a GPU laptop or workstation. This includes workloads like deep learning, point cloud processing, visualization, VS Code, web browsing, TeamViewer, etc. While it is possible to run everything on one computer, you may need to spend additional effort to mitigate latency issues.</p> <p>These are the basic criteria we look at when selecting a mini PC:</p> <ul> <li>Compact form factor: A smaller computer is easier to install inside the mobile base.</li> <li>Low power consumption: Since the onboard mini PC runs on battery power, lower power consumption is preferred.</li> <li>Processor: The processor does not need to be very powerful since it only runs robot controllers. For instance, we have found that the Intel N100 (a modern, energy-efficient entry-level processor) is adequate for low-level control of our robot, and consumes only 20W under load.</li> </ul> <p>We have primarily used the following models:</p> <ul> <li>Intel NUC 7 (from Q1 2017)</li> <li>Beelink MINI S12 Pro [Beelink] [Amazon]</li> </ul>"},{"location":"bom/#logitech-camera","title":"Logitech camera","text":"<p>We have purchased numerous Logitech C930e webcams from Amazon and have occasionally received counterfeit units. Unfortunately, these fakes have poor image quality and lack support for adjusting basic camera settings in OpenCV.</p> <p>To identify fake webcams, check the vendor and serial number of the device:</p> <pre><code>ls -l /dev/v4l/by-id/\n</code></pre> <p>Example output for a genuine webcam:</p> <pre><code>/dev/v4l/by-id/usb-046d_Logitech_Webcam_C930e_XXXXXXXX-video-index0\n</code></pre> <p>Example output for a fake webcam:</p> <pre><code>/dev/v4l/by-id/usb-Sonix_Technology_Co.__Ltd._Logitech_Webcam_C930e_SN0001-video-index0\n</code></pre> <p>Key differences:</p> <ul> <li>Serial number: Genuine webcams have a unique serial number, whereas fake devices use a generic one (<code>SN0001</code>).</li> <li>Vendor: Genuine devices list <code>Logitech</code> as the vendor, whereas fake devices show <code>Sonix Technology Co., Ltd.</code>.</li> </ul> <p>Most recently, we have received genuine cameras from the Amazon sellers \"ARF Tech\" and \"Lumege (Serial Numbers Recorded)\", and fakes from the Amazon seller \"TecTrove\".</p>"},{"location":"can-system/","title":"CAN system","text":"<p>Estimated time: 30 minutes</p> <p>This page describes how to set up the CAN system so that you can communicate with the motors and encoders from your computer.</p>"},{"location":"can-system/#canivore-assembly","title":"CANivore assembly","text":"<p>Tools:</p> <ul> <li>WAGO tool</li> <li>Electrical tape</li> <li>Zip ties</li> </ul> <p>Follow these steps to assemble the CANivore:</p> <ol> <li>Locate the CAN cables in the cable kit: one with a female connector and one with a male connector.</li> <li>Connect the female CAN cable to the green (G) and yellow (Y) slots on the CANivore.</li> <li>Attach the male CAN cable to the termination resistor using two inline wire connectors.</li> <li>Cover the resistor with electrical tape and secure the tape with a zip tie.</li> </ol> <p>See video (2x speed):</p> <p>Tip</p> <p>Press down on the white spring mechanism with the WAGO tool to open the wire slot:</p> <p></p> <p>Then, insert the wire while the slot is held open.</p> <p>Tip</p> <p>Double-check the polarities of the CAN wires (green and yellow):</p> <p></p> <p>Tip</p> <p>Avoid leaving exposed metal, as shown with the green wire in the photo below:</p> <p></p> <p>Tip</p> <p>Gently tug on each of the 6 new connections to make sure they are secure.</p>"},{"location":"can-system/#canivore-setup","title":"CANivore setup","text":"<p>To set up the CANivore, first install Phoenix Tuner X on a Windows computer following the official instructions. We have previously tested both of these installation methods:</p> <ul> <li>Microsoft Store</li> <li>Offline EXE installer (Use the latest version of <code>Phoenix-Offline.exe</code>)</li> </ul> <p>Note</p> <p>Windows is only needed for initial setup of the motors and encoders. Our main codebase runs on Ubuntu.</p> <p>After successfully installing Phoenix Tuner X, connect the CANivore USB-to-CAN adapter to your Windows computer. Then, open Phoenix Tuner X and enable the \"CANivore USB\" toggle:</p> <p></p> <p>The CANivore should now appear in Phoenix Tuner X:</p> <p></p> <p>Click the checkbox next to the lightbulb to select the device, then click the up arrow in the top-right corner to open the firmware update dialog:</p> <p></p> <p>In the dialog, click the button to update the device to the latest firmware:</p> <p> </p> <p>Note</p> <p>There are multiple ways to update firmware in Phoenix Tuner X. If you are prompted to upload a file, try again using the method described above.</p> <p>After the firmware update is complete, the border should turn green:</p> <p></p> <p>You can now assign a meaningful name to the device, such as \"Drivetrain\".</p> <p>Next, click the \"LIC\" button in the bottom-right corner and use the dialog to activate your Phoenix Pro license:</p> <p> </p> <p>Note</p> <p>We use a \"CANivore bus\" Pro license, which enables all devices connected to an activated CANivore to access Pro features like field-oriented control. The \"single device\" license activates only one device.</p> <p>Tip</p> <p>The official CANivore setup guide can also be a helpful resource for this section.</p> <p>Tip</p> <p>The Phoenix Tuner X software is maintained by CTR Electronics. Their contact information can be found here.</p>"},{"location":"can-system/#motor-setup","title":"Motor setup","text":"<p>Please connect and set up one motor at a time using the following procedure:</p> <ol> <li>Locate the two CAN wires on each motor: one with a male connector and one with a female connector.</li> <li>Attach the termination resistor to the female connector.</li> <li>Attach the CANivore to the male connector.</li> <li>Make sure the connector polarities are correctly aligned (yellow to yellow, green to green).</li> </ol> <p>See video (2x speed):</p> <p>The resulting CAN bus should look like this:</p> <pre><code>flowchart LR\n    C(\"CANivore\") &lt;--&gt; M(\"Motor\") &lt;--&gt; R(\"Resistor\")</code></pre> <p>Once connected, the motor should appear in Phoenix Tuner X:</p> <p></p> <p>Update the motor's firmware using the same procedure as with the CANivore:</p> <p> </p> <p>The border should turn green after the firmware update:</p> <p></p> <p>Then, use the following table to assign the motor's device ID and name accordingly:</p> Caster No. Motor No. Motor Name 1 1 Front Right Steer 2 Front Right Drive 2 3 Front Left Steer 4 Front Left Drive 3 5 Back Left Steer 6 Back Left Drive 4 7 Back Right Steer 8 Back Right Drive <p>Repeat this process to set up all 8 motors.</p> <p>Note</p> <p>Our convention is to list steer motors (odd numbers) before drive motors (even numbers):</p> Steer motor Drive motor <p>Note</p> <p>For reference, this will be the eventual layout of the motors and encoders within the frame:</p> <p></p>"},{"location":"can-system/#encoder-setup","title":"Encoder setup","text":"<p>Please connect and set up one encoder at a time, following a process similar to the motor setup. Connect the encoder to the CANivore and the termination resistor. See video (2x speed):</p> <p>The resulting CAN bus should look like this:</p> <pre><code>flowchart LR\n    C(\"CANivore\") &lt;--&gt; E(\"Encoder\") &lt;--&gt; R(\"Resistor\")</code></pre> <p>The encoder should appear in Phoenix Tuner X:</p> <p></p> <p>Update the encoder's firmware using the same procedure as before:</p> <p> </p> <p>After the firmware update, the border should turn green:</p> <p></p> <p>Use the following table to assign the encoder's device ID and name:</p> Caster No. Encoder No. Encoder Name 1 1 Front Right 2 2 Front Left 3 3 Back Left 4 4 Back Right <p>Repeat this process to set up all 4 encoders.</p>"},{"location":"can-system/#can-bus-wiring","title":"CAN bus wiring","text":"<p>After completing the firmware setup, connect the CAN wires of all devices in the following order:</p> <pre><code>flowchart LR\n    C(\"CANivore\") &lt;--&gt; C1(\"Caster 1\") &lt;--&gt; C2(\"Caster 2\") &lt;--&gt; C3(\"Caster 3\") &lt;--&gt; C4(\"Caster 4\") &lt;--&gt; R(\"Resistor\")</code></pre> <p>Within each caster module, connect the motors and encoders in the following order:</p> <pre><code>flowchart LR\n    subgraph C1 [\"Caster 1\"]\n        M1(\"Motor 1 (steer)\") &lt;--&gt; E1(Encoder 1) &lt;--&gt; M2(\"Motor 2 (drive)\")\n    end\n    C(\"CANivore\") &lt;--&gt; M1\n    M2 &lt;--&gt; C2(\"Caster 2\")</code></pre> <pre><code>flowchart LR\n    subgraph C2 [\"Caster 2\"]\n        M3(\"Motor 3 (steer)\") &lt;--&gt; E2(Encoder 2) &lt;--&gt; M4(\"Motor 4 (drive)\")\n    end\n    C1(\"Caster 1\") &lt;--&gt; M3\n    M4 &lt;--&gt; C3(\"Caster 3\")</code></pre> <pre><code>flowchart LR\n    subgraph C3 [\"Caster 3\"]\n        M5(\"Motor 5 (steer)\") &lt;--&gt; E3(Encoder 3) &lt;--&gt; M6(\"Motor 6 (drive)\")\n    end\n    C2(\"Caster 2\") &lt;--&gt; M5\n    M6 &lt;--&gt; C4(\"Caster 4\")</code></pre> <pre><code>flowchart LR\n    subgraph C4 [\"Caster 4\"]\n        M7(\"Motor 7 (steer)\") &lt;--&gt; E4(Encoder 4) &lt;--&gt; M8(\"Motor 8 (drive)\")\n    end\n    C3(\"Caster 3\") &lt;--&gt; M7\n    M8 &lt;--&gt; R(\"Resistor\")</code></pre> <p>Note</p> <p>We recommend connecting the devices in the same order shown here. However, the devices can actually be connected in any order as long as the sequence starts with the CANivore and ends with the termination resistor.</p> <p>See video (4x/16x speed):</p> <p>Note</p> <p>In the video above, the motors are arranged as 2, 1, 4, 3 instead of the expected order (1, 2, 3, 4) because the wires are facing upwards. Once the casters are installed in the frame later, the wires will face inward, and the motor numbers will align with the expected order.</p> <p>After everything is connected, double-check that all 12 devices appear in Phoenix Tuner X:</p> <p></p>"},{"location":"can-system/#motor-testing","title":"Motor testing","text":"<p>For each caster module, start by testing the steer motor:</p> <ol> <li>Open the steer motor in Phoenix Tuner X.</li> <li>Set the control mode to \"DutyCycleOut\".</li> <li>Click the red \"Disabled\" button to change it to \"Enabled\".</li> <li>Set the \"Output\" to a small value, such as 0.1.</li> </ol> <p>See screenshot below:</p> <p></p> <p>This should cause the caster to steer:</p> <p>Note</p> <p>If you decide to experiment with other control modes, be careful! The default min/max limits are very high for some modes. You might want to hold down the module or secure it in place, just in case.</p> <p>Next, test the drive motor by following the same procedure:</p> <p></p> <p>This should cause the wheel to turn:</p> <p>Repeat this process for all 8 motors across the 4 modules.</p> <p>Note</p> <p>If you hear abnormally loud gear grinding sounds while the wheel is turning, it's likely due to gear misalignment. Please revisit Step 8 in the caster module assembly guide and make sure the wheel mounts were installed properly.</p> <p>Tip</p> <p>Unsure which motor is which? You can click the \"Blink\" button in Phoenix Tuner X to make the selected motor's lights blink rapidly.</p> <p>Tip</p> <p>We recommend labeling each motor with a sticker showing its number.</p>"},{"location":"can-system/#encoder-testing","title":"Encoder testing","text":"<p>For each caster, test its encoder by manually steering the module while monitoring the encoder position under \"General Signals\" (look for the \"Position\" reading and click \"Refresh\" to update). Start by steering until the encoder position is close to 0:</p> <p></p> <p>Once the encoder position is near 0, steer the module through one full revolution. See video (2x speed):</p> <p>After clicking \"Refresh\" again, the encoder position should now read close to 1:</p> <p></p> <p>To test further, steer the module for several more revolutions and verify that the encoder reading accurately reflects the number of revolutions. Repeat for all 4 encoders.</p> <p>Tip</p> <p>If your encoder detects less rotation than expected, the encoder magnet might be loose. This can occur if the Loctite 609 retaining compound has not fully cured yet.</p> <p>Tip</p> <p>To avoid having to repeatedly refresh the position reading, you can also use the plotting functionality:</p> <p></p>"},{"location":"can-system/#setup-complete","title":"Setup complete","text":"<p>After verifying that all motors and encoders are working correctly, your drive system is ready for installation into the frame. Please disconnect all wires before proceeding. You will reconnect them in the same way later, after the modules are installed in the frame.</p> <p>Note</p> <p>Sealed lead acid (SLA) batteries should not be left in a discharged state, as it can degrade the battery. Please charge the battery after use. Refer to the Usage guide for charging instructions.</p>"},{"location":"caster-modules/","title":"Caster modules","text":"<p>Estimated time: 4 hours</p> <p>This page will guide you through assembly of the four caster modules.</p> <p></p>"},{"location":"caster-modules/#swerve-module-assembly","title":"Swerve module assembly","text":"<p>Estimated time: 1 hour</p> <p>Tools:</p> <ul> <li>Imperial hex keys (3/16\", 5/32\", and 1/8\")</li> </ul> <p>Our caster module is adapted from the SDS MK4 swerve module, widely used in the FIRST robotics competition (FRC). The adaptation involved minor modifications to the bottom portion of the module.</p> Caster module Swerve module <p>Note</p> <p>The modifications add a caster offset to the wheel, similar to the offset found in office chair wheels. Our paper explains in more detail why this offset is important.</p> Caster module Swerve module <p>In our caster module, aside from three custom parts, all other components are reused directly from the swerve module kit, so the assembly process is very similar. Therefore, we highly recommend performing a practice assembly of an unmodified swerve module first to familiarize yourself with the process and all the different parts:</p> <ul> <li>Swerve module assembly guide</li> <li>Swerve module assembly video</li> </ul> <p>After you have completed the practice assembly, please disassemble the swerve module before proceeding.</p> <p>Note</p> <p>There is no need to use threadlocker or carefully tighten screws during the practice assembly, as the swerve module will be disassembled afterward. You can also skip any steps involving the encoder and encoder magnet for now.</p> <p>Note</p> <p>Use the following configurations when assembling the swerve module:</p> <ul> <li>Motor: Kraken X60 with risers</li> <li>Wheel: Colson wheel (secured with 3 screws instead of 6)</li> <li>Intermediate shaft: V3</li> </ul> <p>Note</p> <p>The swerve module kit uses hex screws in Imperial sizes only. To avoid accidentally stripping screws, do not use any metric hex keys during assembly. If you are using Bondhus hex tools, use only the yellow ones, not the red ones.</p> <p>Note</p> <p>After assembly is complete, the only leftover parts should be four extra screws. They are not used because the Kraken motor risers require slightly longer screws.</p> <p>Tip</p> <p>All screws should go in smoothly and not feel tight until they are fully inserted. If a screw encounters resistance when it is only partially inserted, it is likely due to misalignment. Loosen the screw, realign it, and try again.</p> <p>Tip</p> <p>We highly recommend working in an uncluttered space and keeping parts in their original bags. Parts can easily be dropped during assembly, causing small screws to scatter everywhere.</p> <p>Tip</p> <p>Please pay special attention to small parts such as the E-clip, shim, encoder magnet, and encoder housing screws, as they can easily get lost.</p>"},{"location":"caster-modules/#wheel-mount-printing","title":"Wheel mount printing","text":"<p>Each caster module uses a pair of custom 3D-printed wheel mounts. Below are a few photos showing the wheel mounts installed on the caster module:</p> <p> </p> <p>The wheel mounts hold the two bevel gears in precise alignment, as shown below, so high print accuracy is required. If the gears are too close together, gear interference will occur, preventing the wheel from turning smoothly.</p> <p></p> <p>We have made successful prints on several 3D printers. Below, we provide the print files we used. If your printer is listed, we recommend using the provided 3MF or G-code files. For other printers, we provide the STL files along with minimal slicer settings.</p> <p>Print files</p> SindohBambu LabOriginal PrusaOther <p>Sindoh 3DWOX 1</p> <ul> <li>Wheel Mount A.gcode</li> <li>Wheel Mount B.gcode</li> </ul> Slicer settings <p>3DWOX Desktop</p> <ul> <li>Both wheel mounts:<ul> <li>Settings &gt; Support &gt; Overhang Angle (deg): 30 (default is 60)</li> </ul> </li> <li>Wheel mount B only:<ul> <li>Settings &gt; Quality / Shell &gt; Shell &gt; Wall Thickness (mm): 1.6 (default is 0.8)</li> </ul> </li> </ul> <p>Bambu Lab X1-Carbon</p> <ul> <li>Wheel Mount A.3mf</li> <li>Wheel Mount B.3mf</li> <li>Wheel Mount A.gcode</li> <li>Wheel Mount B.gcode</li> </ul> <p>Bambu Lab X1E</p> <ul> <li>Wheel Mount A.3mf</li> <li>Wheel Mount B.3mf</li> <li>Wheel Mount A.gcode</li> <li>Wheel Mount B.gcode</li> </ul> Slicer settings <p>Bambu Studio</p> <ul> <li>Both wheel mounts:<ul> <li>Filament: Bambu PLA Basic</li> <li>Process: 0.20mm Standard @BBL X1C</li> <li>Support &gt; Enable support: true (default is false)</li> <li>Supports Painting &gt; Tool type: Fill (default is Circle)<ul> <li>Apply to all overhang regions</li> </ul> </li> </ul> </li> <li>Wheel mount B only:<ul> <li>Strength &gt; Wall loops: 4 (default is 2)</li> </ul> </li> </ul> <p>Original Prusa MK3.9</p> <ul> <li>Wheel Mount A.3mf</li> <li>Wheel Mount B.3mf</li> <li>Wheel Mount A.bgcode</li> <li>Wheel Mount B.bgcode</li> </ul> <p>Original Prusa MK3.5</p> <ul> <li>Wheel Mount A.3mf</li> <li>Wheel Mount B.3mf</li> <li>Wheel Mount A.bgcode</li> <li>Wheel Mount B.bgcode</li> </ul> Slicer settings <p>PrusaSlicer</p> <ul> <li>Both wheel mounts:<ul> <li>Filament: Generic PLA</li> <li>Print Settings &gt; Support material &gt; Generate support material: true (default is false)</li> <li>Paint-on supports &gt; Tool type: Smart fill (default is Brush)<ul> <li>Apply to all overhang regions</li> </ul> </li> </ul> </li> <li>Wheel mount B only:<ul> <li>Layers and perimeters &gt; Vertical shells &gt; Perimeters: 4 (default is 2)</li> </ul> </li> </ul> <p>STL files</p> <ul> <li>Wheel Mount A.stl</li> <li>Wheel Mount B.stl</li> </ul> <p>Minimal slicer settings</p> <ul> <li>Both wheel mounts:<ul> <li>Enable supports</li> <li>Apply paint-on supports to all overhang regions</li> </ul> </li> <li>Wheel mount B only:<ul> <li>Increase wall/shell loops from 2 to 4 (0.8 mm to 1.6 mm)</li> </ul> </li> </ul> <p>Note</p> <p>Please perform bed leveling to improve print accuracy. On higher-end printers, this process is often done automatically.</p> <p>Note</p> <p>We tested these printers and do not recommend using them due to their low print quality:</p> <ul> <li>Creality Ender-3</li> <li>Creality Ender-3 S1 Pro</li> <li>Creality Ender-5 S1</li> </ul> Original STEP files <p>If you wish to make your own modifications to the CAD design, the original STEP files are available here:</p> Wheel mount A Wheel mount B [STEP] [STEP] <p>For 3D printing, we made the following modifications to account for printer tolerances, then exported to STL format:</p> <ul> <li>Both wheel mounts:<ul> <li>Reduce the width of the top protrusion that fits into the base pulley by 0.004\" radially</li> <li>Increase the width of the clearance portion of the shoulder screw hole by 0.004\" radially</li> </ul> </li> <li>Wheel mount B only:<ul> <li>Apply a 0.05\" chamfer to the edge of the two mounting holes to account for burr formation during screw self-tapping</li> <li>Increase the width of the threaded portion of the shoulder screw hole by 0.015\" radially (from 0.257\" to 0.287\")</li> <li>Increase the width of the bearing housing by 0.004\" radially</li> <li>Add an integrated shim around the edge of the shoulder screw hole with a thickness of 0.008\"</li> </ul> </li> </ul> <p>Note that the integrated shim (highlighted in orange below) helps ensure proper bevel gear spacing:</p> <p></p> <p>Note</p> <p>The top portions of the wheel mounts need to be printed accurately to ensure proper contact with the base pulley. Therefore, the wheel mounts should be printed in the upright orientation as shown below. Do not print them upside down.</p> <p> </p> <p>Note</p> <p>All overhang regions must be fully supported during printing:</p> <p> </p> <p>In many slicers, the auto-generated supports may be incomplete, so you may need to add paint-on supports manually. For example, this video shows how to do this in Bambu Studio:</p> <p></p> <p>Tip</p> <p>We recommend printing a few extra copies of wheel mount B, as the screw holes can sometimes be damaged during assembly.</p>"},{"location":"caster-modules/#motor-assembly","title":"Motor assembly","text":"<p>Estimated time: 30 minutes</p> <p>Tools:</p> <ul> <li>Torx screwdriver (T9)</li> <li>Torx screwdriver (T10)</li> <li>Large-gauge wire stripper (10 AWG stranded)</li> </ul> <p>Follow these steps to assemble each motor:</p> <ol> <li>Connect the power cables (red/black) using the thick screws.</li> <li>Connect the CAN bus cables (yellow/green) using the short, thin screws.</li> <li>Install the terminal cover using the long screws.</li> </ol> <p>See video (4x speed):</p> <p>Note</p> <p>The ring terminals should be installed with the flat side facing downward:</p> <p> </p> <p>Note</p> <p>Make sure all four connections are tight! Loose connections can be very difficult to troubleshoot later.</p> <p>Note</p> <p>When installing the terminal cover, make sure that the thin CAN bus cables are not pinched.</p> <p>Next, use a large-gauge (10\u202fAWG stranded) wire stripper to remove 3/8\" (1\u202fcm) of insulation from the free end of each power cable:</p> <p></p> <p>Note</p> <p>Many wire strippers are designed for a maximum gauge of 12 AWG stranded (10 AWG solid), but the motor power cables are 10 AWG stranded, which is slightly larger. If using such a wire stripper, take extra care to avoid cutting the wire strands.</p> <p>Tip</p> <p>After assembling all eight motors, go through each one individually and double-check the polarity of all four wires. The wire colors should match those shown in this photo (black, yellow, green, red):</p> <p></p> <p>Tip</p> <p>If you are building this robot for the first time, consider leaving the terminal covers off until you have verified that the robot is operational. The covers can be easily installed later.</p>"},{"location":"caster-modules/#caster-module-assembly","title":"Caster module assembly","text":"<p>Estimated time: 2 hours</p> <p>Tools:</p> <ul> <li>Phillips screwdriver (#1)</li> <li>Imperial hex keys (3/16\", 5/32\", and 1/8\")</li> <li>Loctite 609 retaining compound</li> <li>Loctite 243 threadlocker</li> <li>Paper towels</li> </ul> <p>You should now be ready to assemble the caster modules. In the following subsections, we will follow the swerve module assembly guide to build the modules, with a few slight modifications.</p> <p>Note</p> <p>Screws used in the caster module should be fairly tight. Fully insert each screw and tighten slightly past the point of firm resistance. The exception is any screw that threads into a plastic part rather than metal (be very careful not to overtighten those screws).</p> <p>Note</p> <p>Apply Loctite 243 threadlocker (blue) to all screws that thread into metal. Do not apply threadlocker to screws that thread into plastic.</p> <p>Note</p> <p>For caster module assembly, use only Imperial hex keys (Bondhus yellow). Do not use any metric hex keys (Bondhus red).</p>"},{"location":"caster-modules/#step-1-encoder-mounting","title":"Step 1: Encoder mounting","text":"<p>Follow these steps to mount the encoder onto the motor plate:</p> <ol> <li>Attach the encoder housing to the plate using the two shorter screws.</li> <li>Insert the encoder circuit board.</li> <li>Secure the housing cap on top with the longer screw.</li> </ol> <p>See video (2x speed):</p> <p>Note</p> <p>The CANcoder encoder is not part of the MK4 swerve module kit.</p> <p>Tip</p> <p>Do not overtighten the screw for the housing cap, as this can crack the plastic.</p> <p>Tip</p> <p>Press down on the housing cap to ensure it is fully seated. In this photo, the cap is partially seated:</p> <p></p> <p>Next, insert the encoder magnet into the center column and secure it using Loctite 609 retaining compound. See video (4x speed):</p> <p>Tip</p> <p>Loctite 609 is green, be careful not to mix it up with Loctite 243 (blue).</p> <p>Tip</p> <p>The retaining compound can take up to 24 hours to fully cure. If the magnet is not fixed in place by the time you run software, the encoder will produce inaccurate readings. You can check whether the magnet is secure by using a hex key to see if it can still move via magnetic force. This video (2x speed) shows a magnet that can still move because the retaining compound has not yet cured:</p> <p></p>"},{"location":"caster-modules/#step-2-motor-configurations","title":"Step 2: Motor configurations","text":"<p>Follow these steps to secure the motors to the motor plate:</p> <ol> <li>Attach each motor to the plate using a motor riser and 7/8\" screw.</li> <li>On each motor shaft, place 2 spacers (0.125\" and 0.375\"), followed by the appropriate pinion gear.</li> <li>Secure the pinion gears with motor screws.</li> </ol> <p>See video (2x speed):</p> <p>Note</p> <p>Since the Kraken motor requires risers, the longer screws included in the motor riser kit (right) should be used instead of the shorter ones from the swerve module kit (left).</p> <p></p> <p>Note</p> <p>Make sure to use these specific screw holes on the motors:</p> <p></p> <p>Tip</p> <p>The screws should go in smoothly without resistance. If you encounter resistance, check for misalignment between the riser and the motor plate like in the photo below:</p> <p></p> <p>Tip</p> <p>If the pinion gears are placed on the wrong shafts, the larger gear will collide with the motor plate:</p> <p></p>"},{"location":"caster-modules/#step-3-wheel-assembly","title":"Step 3: Wheel assembly","text":"<p>Use the three screws included with the Colson wheel kit to mount the 45T bevel gear onto the wheel hub. See video (2x speed):</p> <p>Note</p> <p>These screws should turn smoothly with no resistance until fully inserted. However, we have found that the bevel gear's screw hole threads sometimes have quality issues. In the video, we first insert the three screws directly into the gear to check that the threads were tapped properly.</p> <p>Note</p> <p>The inner face of the bevel gear should be flush against the wheel hub, and the three screws should extend slightly beyond the face:</p> <p></p> <p>Next, insert the R8 bearing and wheel spacer into the wheel hub on the bevel gear side, and the R6 bearing on the opposite side. See video (2x speed):</p> <p>Tip</p> <p>Make sure the bearings are inserted perpendicular to the housing. If a bearing becomes stuck due to misalignment like in the photo below, remove it and try again. Do not try to force it in, as this can make removal very difficult.</p> <p></p>"},{"location":"caster-modules/#step-4-bearing-mounting","title":"Step 4: Bearing mounting","text":"<p>Secure the X-contact bearing with five 0.25\" screws. See video (4x speed):</p> <p>Tip</p> <p>There are 7 screw holes around the bearing but only 5 of them are used to mount it.</p>"},{"location":"caster-modules/#step-5-intermediate-shaft-assembly","title":"Step 5: Intermediate shaft assembly","text":"<p>Follow these steps to install the intermediate shaft:</p> <ol> <li>Insert a 6802 bearing into the base pulley, followed by the custom intermediate shaft.</li> <li>Install the hex bore gear onto the shaft.</li> <li>Secure the gear with the E-clip.</li> </ol> <p>See video (2x speed):</p> <p>Note</p> <p>Our caster module uses a custom-machined intermediate shaft that is 3/8\" longer than the original swerve module shaft. Here is a photo comparing the two shafts:</p> <p></p> <p>Tip</p> <p>Make sure the bearing is inserted perpendicular to the housing. If it does not go in all the way (see photo below), remove it and try again. Do not force it in.</p> <p></p> <p>Tip</p> <p>Check that the E-clip is fully seated in its groove, as shown in the right image.</p> <p> </p>"},{"location":"caster-modules/#step-6-center-column-assembly","title":"Step 6: Center column assembly","text":"<p>Insert two 6802 bearings into the double gear and capture with the center column and a 0.625\" screw. See video (2x speed):</p> <p>Note</p> <p>Check that the encoder magnet is already installed inside the center column.</p> <p>Tip</p> <p>If a bearing does not go all the way in, it is likely due to misalignment. Remove the bearing, ensure it is perpendicular to the housing, and try again. Do not force a misaligned bearing into place.</p> <p>Tip</p> <p>Make sure the bottom bearing is fully inserted, with the bottom surfaces flush (as shown in the right image).</p> <p> </p> <p>Tip</p> <p>When the center column is fully inserted into the base pulley, it should be fixed in place (as shown in the right image).</p> <p> </p>"},{"location":"caster-modules/#step-7-pulley-mounting","title":"Step 7: Pulley mounting","text":"<p>Follow these steps to mount the base pulley:</p> <ol> <li>Install the R188 bearing into the main plate.</li> <li>Install the timing belt and steering shaft onto the base pulley.</li> <li>Mount the base pulley into the main plate.</li> <li>Fully insert the journal of the steering shaft into the R188 bearing.</li> </ol> <p>See video (2x speed):</p> <p>Tip</p> <p>The base pulley should be properly aligned with the X-contact bearing and fully inserted. Make sure it is not partially inserted, like in this photo:</p> <p></p>"},{"location":"caster-modules/#step-8-wheel-mount-prep","title":"Step 8: Wheel mount prep","text":"<p>Follow these steps to install wheel mount B:</p> <ol> <li>Install the 688 bearing and 15T bevel gear into wheel mount B.</li> <li>Insert the intermediate shaft through the bevel gear (but not into the bearing yet).</li> <li>Place the 1mm shim underneath the bevel gear.</li> <li>Insert the intermediate shaft through the shim and into the bearing.</li> <li>Use two 0.625\" screws to secure the wheel mount.</li> </ol> <p>See video (2x speed):</p> <p>Note</p> <p>Do not overtighten the two screws going into the 3D-printed wheel mount, as this can strip the threads. If a screw suddenly becomes loose after fully inserting it, the threads have likely been stripped. If this happens, please discard the wheel mount and reprint it. To mitigate this potential issue, the 3D printing instructions for wheel mount B include reinforced walls (1.6 mm instead of the default 0.8 mm)</p> <p>Note</p> <p>Do not tighten the screws too quickly as the resulting force can strip the plastic threads in the screw holes.</p> <p>Note</p> <p>Threadlocker should not be applied to the two screws because they thread into plastic.</p> <p>Note</p> <p>After installation, wheel mount B should sit completely flush against the base pulley. If there is a visible gap like in the photo below, please discard the part (since the tapped holes are misaligned) and print a new one.</p> <p></p> <p>This issue may also result from an inaccurate print. Double-check that bed leveling was performed recently, or consider using a higher-quality 3D printer.</p> <p>Note</p> <p>It is very important that there is no gap between the wheel mount and the base pulley. This video demonstrates how such a gap can cause the gears on top to mesh too tightly:</p> <p></p> <p>When the gears are too close, they will produce loud grinding sounds. This video provides an auditory comparison between normally spaced gears and gears that are improperly spaced:</p> <p></p> <p>With correct spacing, the gears should spin freely, as shown in this video:</p> <p></p> <p>Note</p> <p>The wheel mounts should not exhibit any cracking, such as shown in the photo below. If cracking occurs, double-check that the part was printed with proper support for all overhang regions.</p> <p></p> <p>Tip</p> <p>Don't forget to include the shim underneath the 15T bevel gear:</p> <p></p> <p>Tip</p> <p>We use the partially inserted shaft to prevent the shim from falling into the recessed area behind the gear:</p> <p></p>"},{"location":"caster-modules/#step-9-wheel-mount-assembly","title":"Step 9: Wheel mount assembly","text":"<p>Use two 1\" screws to install wheel mount A. See video (4x speed):</p> <p>Note</p> <p>Do not overtighten these screws, as it can make it difficult to insert the wheel in the next step.</p> <p>Note</p> <p>While we mostly follow the same steps as the official swerve module assembly guide, we reordered steps 9, 10, and 11 because our modified wheel mount A must be installed before the wheel to avoid obstructing one of the screw holes.</p> <p>Tip</p> <p>If you are having trouble aligning the screws, it might help to look more closely at how the wheel mounts fit into the base pulley. See video (2x speed):</p> <p></p>"},{"location":"caster-modules/#step-10-attach-wheel","title":"Step 10: Attach wheel","text":"<p>Insert the wheel between the wheel mounts and secure it with the shoulder bolt. See video (2x speed):</p> <p>Note</p> <p>Do not overtighten the shoulder bolt as it may bring the bevel gears too close together, leading to loud grinding sounds.</p> <p>Note</p> <p>The wheel should spin freely once installed, as shown at the end of the video. If it does not, try adjusting the shoulder bolt tightness or using a different 3D-printed wheel mount, as slight variations can occur between prints.</p> <p>Note</p> <p>Threadlocker should not be applied to the shoulder bolt, as it threads into a plastic part.</p> <p>Note</p> <p>To avoid stripping the plastic material in the screw hole, do not tighten the bolt too quickly.</p>"},{"location":"caster-modules/#step-11-motor-plate-mounting","title":"Step 11: Motor plate mounting","text":"<p>Follow these steps to mount the motor plate onto the rest of the assembly:</p> <ol> <li>Install the steering gear and the F689 bearing onto the steering shaft.</li> <li>Install a 6802 bearing onto the center shaft.</li> <li>Mount the motor plate onto the assembly, making sure both shafts are fully inserted.</li> </ol> <p>See video (2x speed):</p> <p>Next, secure the four spacers with four socket head cap screws. See video (4x speed):</p> <p>Tip</p> <p>The socket head cap screws used here have two different lengths: two of them are 2.5\" long, the other two are 3\" long.</p>"},{"location":"caster-modules/#assembly-complete","title":"Assembly complete","text":"<p>Your caster module is now fully assembled. Please repeat the process to build a total of four caster modules.</p> <p>Note</p> <p>The following parts should be the only ones left over after assembly:</p> <ul> <li>The two wheel mounts and the intermediate shaft are not used because of the swerve-to-caster modification.</li> <li>The four black screws are not used because the Kraken motor risers require slightly longer screws.</li> </ul> <p></p> <p>If you have other leftover parts not shown here, please double-check whether any step was missed during assembly.</p>"},{"location":"caster-modules/#lubrication","title":"Lubrication","text":"<p>Estimated time: 20 minutes</p> <p>Tools:</p> <ul> <li>White lithium grease</li> <li>Paper towels</li> </ul> <p>The gears in each caster module should be greased periodically for smooth operation and longevity. Each module contains 8 gears, make sure to apply grease to all of them. Afterwards, wipe away any excess to prevent buildup.</p> <p>Here is a video (4x speed) demonstrating the lubrication process:</p>"},{"location":"frame/","title":"Frame","text":"<p>Estimated time: 3 hours</p> <p>This page will guide you through assembly of the T-slot aluminum frame.</p>"},{"location":"frame/#cad-model","title":"CAD model","text":"<p>To build the frame, please follow the design in the CAD model. Below, we link to an online viewer that allows you to navigate the CAD model directly in your browser.</p> KinovaFrankaARX5 <p></p> <p>Click to open online CAD viewer in new tab: [Onshape]</p> <p></p> <p>Click to open online CAD viewer in new tab: [Onshape]</p> <p></p> <p>Click to open online CAD viewer in new tab: [Onshape]</p> <p>Tip</p> <p>To rotate the Onshape 3D view, hold down the right mouse button and drag. To identify a part, click on it in the 3D view, and its name will be highlighted in the parts list on the left side. You can hide and show parts to improve visibility. For more tips on navigating the user interface, please see the Onshape docs.</p> <p>We also provide the following drawing which shows all relevant measurements (in mm):</p> KinovaFrankaARX5 <p></p> <p></p> <p></p>"},{"location":"frame/#parts","title":"Parts","text":"<p>You will need the following parts to build the frame:</p> KinovaFrankaARX5 Item Quantity 2020 500mm rail 13 2020 250mm rail 4 2020 28mm gusset 24 2020 20mm gusset 8 2020 90 degree plate 24 2020 20mm corner bracket 8 2020 M5 slide-in T-nuts 222 M5 8mm screws 174 M5 10mm screws 48 Item Quantity 2020 500mm rail 16 2020 300mm rail 4 2020 28mm gusset 20 2020 20mm gusset 8 2020 90 degree plate 20 2020 20mm corner bracket 32 2020 M5 slide-in T-nuts 237 M5 8mm screws 197 M5 10mm screws 40 Item Quantity 2020 400mm rail 12 2020 250mm rail 4 2020 28mm gusset 16 2020 20mm gusset 8 2020 90 degree plate 20 2020 tee plate 2 2020 20mm corner bracket 8 2020 M5 slide-in T-nuts 201 M5 8mm screws 158 M5 10mm screws 43 <p>Note</p> <p>Some parts come with hex keys included:</p> <p></p> <p>We recommend discarding these, as they are typically low-quality and can easily strip screws.</p> <p>Note</p> <p>The 90 degree plates come with their own screws (right). We recommend discarding them because they look very similar to the 8mm screws but are not as strong.</p> <p> </p> <p>The following table shows which screws and T-nuts to use for each part:</p> Item Screw T-nut 28mm gusset Included Included 20mm gusset 8mm Slide-in 90 degree plate 8mm Slide-in Tee plate 8mm Slide-in Corner bracket 8mm Slide-in Top plate (3mm acrylic) 8mm Slide-in Bottom plate (6mm acrylic) 10mm Slide-in Caster module 10mm Slide-in <p>Note</p> <p>You will find three kinds of T-nuts:</p> <p></p> <p>We will primarily use slide-in T-nuts (left), which need to be pre-installed because they are inserted from the end of the rail. Roll-in T-nuts (middle) can be used if you forgot to pre-install a slide-in T-nut. We recommend discarding all drop-in T-nuts (right), as we will not use them.</p> <p>Note</p> <p>The 28mm gussets come with their own screws and T-nuts (middle), which are slightly different from the standard M5 screws and T-nuts (right). The screws for the 28mm gussets have wider heads to accommodate the larger mounting holes in the gussets.</p> <p></p> <p>Note</p> <p>For all other parts, we will use these two types of M5 screws:</p> <p></p> <p>Most parts will use the shorter 8mm screw. The longer 10mm screw should be used when mounting thicker parts, such as the caster modules and the bottom acrylic plate.</p>"},{"location":"frame/#assembly","title":"Assembly","text":"<p>Please follow the CAD model to assemble your frame. We break down the process into more detailed steps below, but feel free to assemble in any way you prefer.</p> <p>Note</p> <p>The frame uses hex screws in metric sizes only. To avoid accidentally stripping screws, do not use any Imperial hex keys during frame assembly. If you are using Bondhus hex tools, use only the red ones, not the yellow ones.</p> <p>Tip</p> <p>Before starting assembly, gather all parts and lay each one next to where it will be installed. This helps ensure that all parts are accounted for.</p> <p>Tip</p> <p>Make sure screws are tight. Vibrations from robot movement may cause screws to loosen and fall out.</p> <p>Tip</p> <p>Screws should go in smoothly and should not feel tight until fully seated. If you find that a partially inserted screw is difficult to turn, it is most likely due to misalignment. Please loosen the screw and check the alignment. Do not force the screw in.</p>"},{"location":"frame/#bottom-frame","title":"Bottom frame","text":"<p>Assemble the bottom frame:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Note</p> <p>There are two sizes of gussets: 28mm (left) and 20mm (right).</p> <p></p> <p>We primarily use the larger 28mm gusset, but there are 8 locations where the smaller 20mm gusset must be used, as shown in the image below. If the 28mm gusset is used in any of these locations, it will collide with the caster module, preventing proper installation.</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Note</p> <p>Please pre-install slide-in T-nuts for the caster modules and the bottom acrylic plate:</p> KinovaFrankaARX5 Item T-nuts Caster module 32 Bottom plate 16 Item T-nuts Caster module 32 Bottom plate 8 Item T-nuts Caster module 32 Bottom plate 11 <p>For the caster modules, each corner of the bottom frame should contain 8 T-nuts:</p> <p></p> <p>For the bottom acrylic plate, please refer to the mounting hole locations in the CAD model for T-nut placement.</p> <p>Note</p> <p>If the bottom of your frame is not level, your mobile base may have one wheel constantly off the ground. Before installing the middle crossbars, place your bottom frame on a flat, level surface (such as a tabletop) and make sure it does not rock back and forth.</p>"},{"location":"frame/#top-frame","title":"Top frame","text":"<p>Assemble the top frame:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Note</p> <p>If you will be using the top acrylic plate on your mobile base, please pre-install the corresponding slide-in T-nuts for mounting the plate:</p> KinovaFrankaARX5 Item T-nuts Top plate 22 Item T-nuts Top plate 17 Item T-nuts Top plate 16 <p>For T-nut placement, please refer to the mounting hole locations for the top acrylic plate in the CAD model.</p>"},{"location":"frame/#uprights","title":"Uprights","text":"<p>Attach the 4 vertical rails to the bottom frame:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Tip</p> <p>For this step, we found it helpful to turn the frame sideways to prevent the T-nuts from moving around during screw installation.</p>"},{"location":"frame/#complete-frame","title":"Complete frame","text":"<p>Put together the top and bottom parts to complete the frame:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Tip</p> <p>We turned the frame sideways for this step as well. Make sure to pre-install T-nuts in the vertical uprights before attaching the top frame.</p> <p>Note</p> <p>The top and bottom acrylic plates will be installed later as part of Integration.</p>"},{"location":"integration/","title":"Integration","text":"<p>Estimated time: 2 hours</p> <p>This page will guide you through the process of installing all components into the frame.</p>"},{"location":"integration/#rope-ratcheting","title":"Rope ratcheting","text":"<p>We will use rope ratchets to secure the following components to the frame:</p> <ul> <li>Portable power station</li> <li>SLA battery</li> <li>Mini PC</li> </ul> <p>Below is a demonstration of how to use a rope ratchet to secure a small box to the bottom acrylic plate. See video (2x speed):</p> <p>Note</p> <p>We use rope ratchets because they allow components to be installed or removed in a matter of seconds. For a more permanent setup, custom component mounts can be designed.</p>"},{"location":"integration/#portable-power-station","title":"Portable power station","text":"<p>Estimated time: 15 minutes</p> <p>Follow the steps below to secure the portable power station (camping battery) to the frame.</p> <p>Note</p> <p>It is important to secure the camping battery to the frame because:</p> <ul> <li>We do not want the camping battery to move around or fall out of the base during operation.</li> <li>For controller setup, we need to elevate the wheels off the ground by turning the base on its side.</li> </ul> <p>Tip</p> <p>Make sure the portable power station is functional before installing it in the frame. Check that the AC outlets can power your arm and mini PC.</p> KinovaFrankaARX5 <p>Attach the bottom acrylic plate using 10mm screws:</p> <p></p> <p>Secure the camping battery to the bottom plate using 3 double-looped rope ratchets:</p> <p> </p> <p>Note</p> <p>We used these mounting holes:</p> <p></p> <p>Note</p> <p>The AC outlets should be on the right side of the mobile base.</p> <p>Here is a view of the bottom of the mobile base:</p> <p></p> <p>Note</p> <p>On the underside of the base, perpendicular ropes should be arranged such that they do not touch each other.</p> <p>Note</p> <p>We place the front edge of the camping battery on the bottom plate rather than on the crossbar, as we found this arrangement to be less prone to sliding:</p> <p></p> <p>Note</p> <p>Turn the mobile base on its side to test the stability of the mounting. If the rope ratchets are sufficiently tight, the camping battery should remain securely in place:</p> <p> </p> <p>Move one of the bottom crossbars to create an opening for inserting the camping battery:</p> <p> </p> <p>Insert the camping battery, then move the crossbar back to its original position:</p> <p> </p> <p>Secure the camping battery to the bottom crossbars using 3 rope ratchets in the front-to-back direction:</p> <p> </p> <p>Note</p> <p>The 3 ropes fit into these notches on the bottom acrylic plates:</p> <p></p> <p>Note</p> <p>The AC outlets should be on the front side of the mobile base.</p> <p>Use 4 more rope ratchets in the side-to-side direction to secure the battery to the top crossbars:</p> <p></p> <p>Note</p> <p>These ropes should be looped around the top crossbars to keep the battery from sliding side to side:</p> <p></p> <p>To maintain compatibility with the top acrylic plate, loop around the crossbars only at these specified locations.</p> <p>Here is a view of the bottom of the mobile base:</p> <p></p> <p>Note</p> <p>On the underside of the base, perpendicular ropes should be arranged such that they do not touch each other.</p> <p>Attach the bottom acrylic plates using 4 support brackets, 10mm screws, and slide-in T-nuts:</p> <p></p> <p>Note</p> <p>Turn the mobile base on its side to test the stability of the mounting. If the rope ratchets are sufficiently tight, the camping battery should remain securely in place.</p> <p>Attach the bottom acrylic plate using 10mm screws:</p> <p></p> <p>Secure the camping battery to the bottom plate using 2 double-looped rope ratchets:</p> <p> </p> <p>Note</p> <p>We used these mounting holes:</p> <p></p> <p>Note</p> <p>The AC outlets should be on the front side of the mobile base.</p> <p>Note</p> <p>Turn the mobile base on its side to test the stability of the mounting. If the rope ratchets are sufficiently tight, the camping battery should remain securely in place:</p> <p> </p> <p>Once the portable power station is securely attached, plug in the charging cable:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p>"},{"location":"integration/#sla-battery","title":"SLA battery","text":"<p>Estimated time: 5 minutes</p> <p>Follow these steps to set up the SLA battery mount on the back side of the mobile base:</p> <ol> <li>Attach the 3D-printed battery mount to the bottom plate using four 10mm screws and T-nuts.</li> <li>Install a rope ratchet on the bottom plate for securing the SLA battery to the mount.</li> </ol> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Place an SLA battery into the mount and secure it with the rope ratchet:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Verify that the mount functions properly by turning the robot on its side. The SLA battery should remain securely fixed:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p>"},{"location":"integration/#caster-modules","title":"Caster modules","text":"<p>Estimated time: 20 minutes</p> <p>Install the caster modules into the frame according to the following schematic:</p> <p></p> <p>Note</p> <p>This is the caster configuration used by our low-level controller.</p> <p>For each caster module, use the alignment jig to position the eight T-nuts:</p> <p> </p> <p>Use eight 10mm screws to secure the caster module to the frame. See video (2x speed):</p> <p>Note</p> <p>Make sure to use the longer 10mm screws, not the 8mm screws.</p> <p>Note</p> <p>We are using the 1/4\" tapped holes in the caster module's main plate as M5 clearance holes.</p> <p>Tip</p> <p>The screws are not supposed to feel tight until they are fully inserted. However, these screw holes are highly sensitive to misalignment. If a screw feels stuck, loosen it slightly and wiggle the module to correct the alignment before continuing.</p> <p>Note</p> <p>After installing the caster modules, check that each module is completely flush against the frame like in the left photo. There should not be a gap like in the right photo.</p> <p> </p> <p>After installation, the configuration of the caster modules should match the schematic:</p> <p></p>"},{"location":"integration/#power-system","title":"Power system","text":"<p>Estimated time: 30 minutes</p> KinovaFrankaARX5 <p>Use zip ties to secure the PDP to the left side of the mobile base:</p> <p></p> <p>Connect all motor power cables to the PDP and organize them using zip ties:</p> <p> </p> <p>Due to the large size of the camping battery, 8 of the 16 motor cables are too short to reach the PDP. Follow these steps to set up extensions for the cables:</p> <ol> <li>Cut eight pieces of 10 AWG wire (4 red and 4 black), each 10\u201320 cm long.</li> <li>Connect the wires to the PDP.</li> <li>Attach a 10 AWG wire connector to the free ends of the wires.</li> </ol> <p> </p> <p>Use zip ties to secure the PDP to the left side of the mobile base. Then connect all motor power cables to the PDP and organize them using zip ties:</p> <p> </p> <p>Tip</p> <p>Wires can easily detach if not fully inserted into the connectors. Check that all connections are secure by giving each one a tug:</p> <p></p> <p>The 120A circuit breaker can stick out of the frame (left photo), which can cause the motors to shut off unexpectedly if the red manual trip button is accidentally bumped. To avoid this, secure the breaker to the camping battery with a zip tie (right photo).</p> <p> </p> <p>Use zip ties to secure the PDP to the left side of the mobile base:</p> <p></p> <p>Connect all motor power cables to the PDP and organize them using zip ties:</p> <p> </p> <p>Tip</p> <p>Double-check all PDP connections and make sure there is no exposed metal, as shown with the black wire in this photo:</p> <p></p> <p>Connect all encoder power cables to the PDP using the previously assembled wiring harness:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p>"},{"location":"integration/#can-system","title":"CAN system","text":"<p>Estimated time: 10 minutes</p> <p>Secure the CANivore to the portable power station using a zip tie. Connect the CANivore to motor 1 and the termination resistor to motor 8:</p> KinovaFrankaARX5 <p> </p> <p> </p> <p> </p> <p>Connect the remaining CAN bus cables and organize them using Velcro cable ties:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p>"},{"location":"integration/#mini-pc","title":"Mini PC","text":"<p>Estimated time: 5 minutes</p> <p>Attach the mini PC to the frame using rope ratchets, zip ties, and/or frame gussets. Plug the power adapter into an AC outlet on the portable power station:</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Install the USB hub and HDMI extender, which are useful for connecting a monitor, keyboard, and mouse to the mini PC.</p> <p>Note</p> <p>Make sure all cables are securely fastened to prevent them from accidentally getting caught in the caster module gears.</p>"},{"location":"integration/#integration-testing","title":"Integration testing","text":"<p>Your mobile base should now be ready for integration testing with the software. Before proceeding, please perform the following checks:</p> <ul> <li>Double-check the polarity of all power and CAN connections.</li> <li>Verify that all connections are firmly attached by gently tugging on each one.</li> </ul> <p>If everything checks out, please proceed to the Software page for further setup.</p> <p>Once the mini PC and codebase setup is complete, we typically perform an integration test using gamepad teleoperation. We turn the base on its side and verify that the casters move as expected:</p> <p>After confirming that the mobile base is operational, please return to this page to complete the remaining integration steps.</p>"},{"location":"integration/#cable-organization","title":"Cable organization","text":"<p>Estimated time: 5 minutes</p> <p>Use cable sleeves to further organize the CAN wiring:</p> KinovaFrankaARX5 <p> </p> <p> </p> <p> </p>"},{"location":"integration/#base-camera","title":"Base camera","text":"<p>Estimated time: 5 minutes</p> <p>Follow these steps to install the Logitech camera to the front of the mobile base:</p> <ol> <li>Insert the 3D-printed shim into the hinge to lock the camera angle.</li> <li>Place the camera between the top and bottom parts of the 3D-printed camera mount.</li> <li>Secure the mount to the frame using two 10mm screws and roll-in T-nuts.</li> <li>Route the USB cable to the mini PC and plug it in.</li> </ol> <p> </p>"},{"location":"power-system/","title":"Power system","text":"<p>Estimated time: 30 minutes</p> <p>This page describes how to set up the power system, which supplies power from the sealed lead acid (SLA) battery to the motors and encoders.</p>"},{"location":"power-system/#power-cable-assembly","title":"Power cable assembly","text":"<p>Tools:</p> <ul> <li>5mm hex key</li> <li>5/64\" hex key</li> <li>Socket wrench with 10mm socket</li> <li>Electrical tape</li> <li>Zip ties</li> </ul> <p>Follow these steps to assemble the power distribution panel (PDP) and power cable:</p> <ol> <li>Connect the power cable and 120A circuit breaker to the PDP.</li> <li>Use electrical tape to cover any exposed connections and secure the tape with zip ties.</li> <li>Install the eight 40A breakers into channels 0-3 and 12-15.</li> <li>Install the 5A breaker into channel 4 along with the terminal spacer.</li> </ol> <p>See video (4x speed):</p> <p>Note</p> <p>Make sure that all power cable connections are tight! Loose connections can be very difficult to troubleshoot.</p> <p>Note</p> <p>The 40A breakers should be fully inserted with no exposed metal:</p> <p></p> <p>Note</p> <p>The 5A breaker needs a terminal spacer because its terminals are too long (left photo). The spacer covers the exposed terminals to prevent accidental shorts (right photo).</p> <p> </p> <p>Note</p> <p>Use electrical tape to cover all exposed metal:</p> <p></p> <p>Tip</p> <p>Double-check the polarity of the power cable connections. Red goes with plus and black goes with minus.</p> <p>Tip</p> <p>The FRC robot wiring guide may also be helpful.</p>"},{"location":"power-system/#battery-assembly","title":"Battery assembly","text":"<p>Tools:</p> <ul> <li>Socket wrench with 5/16\" socket</li> <li>Adjustable wrench</li> <li>Electrical tape</li> <li>Zip ties</li> </ul> <p>Follow these steps to assemble each SLA battery:</p> <ol> <li>Connect a battery cable using the screws, nuts, and washers that came with the battery.</li> <li>Use electrical tape to cover the exposed terminals and secure the tape with zip ties.</li> </ol> <p>See video (4x speed):</p> <p>Note</p> <p>Make sure the battery cable connections are tight! Loose connections can be very difficult to troubleshoot.</p> <p>Note</p> <p>Here is how the cable should be oriented for the smaller battery:</p> <p></p> <p>Note</p> <p>Use electrical tape to cover all exposed metal:</p> <p></p> <p>Tip</p> <p>Double-check the polarity of the battery cable connections. Red goes with red and black goes with black.</p>"},{"location":"power-system/#motor-power","title":"Motor power","text":"<p>Tools:</p> <ul> <li>WAGO tool</li> </ul> <p>Connect the power cables from all eight motors to the PDP. See video (4x/16x speed):</p> <p>Note</p> <p>In this step, we are temporarily wiring the motors and encoders for bench testing.</p> <p>Note</p> <p>Some people may find the WAGO connectors on the PDP challenging to work with. Here is a close-up video demonstrating their usage (2x speed):</p> <p></p> <p>As shown in the video, the WAGO operating tool should be inserted straight into the actuation slot at a slight angle to horizontal. The end of the tool should be pushed downward to open the slot fully.</p> <p>We also recommend watching this video for more information: WAGO connectors explained.</p> <p>Note</p> <p>Do not forcefully wiggle the WAGO tool or pry it upward! Doing so can deform the plastic housing, making the connector harder to operate in the future.</p> <p>Tip</p> <p>If you are having trouble getting the wires to go all the way in, look inside the wire insertion slot. Since the wires are thick, it is not sufficient for the slot to be partially open (left), it needs to be fully open (right):</p> <p> </p>"},{"location":"power-system/#encoder-power","title":"Encoder power","text":"<p>Tools:</p> <ul> <li>WAGO tool</li> <li>Wire stripper (22 AWG solid)</li> </ul> <p>Follow these steps to build the encoder wiring harness:</p> <ol> <li>Cut three 22AWG cables: one at 45cm and two at 30cm.</li> <li>Strip 1 cm of insulation from each end.</li> <li>Use two 5-port wire connectors (one for red, one for black) to connect the wires.</li> <li>Attach inline wire connectors to the free ends of the two 30cm cables.</li> </ol> <p>See photos for reference:</p> <p> </p> <p>Note</p> <p>Be sure to strip at least 1 cm of insulation. If there is not enough exposed wire, the WAGO connector may clamp onto the insulation, resulting in intermittent power to the encoder.</p> <p>Next, use the wiring harness to connect all four encoders to the PDP. See video (2x speed):</p>"},{"location":"power-system/#setup-complete","title":"Setup complete","text":"<p>At this point, the power system setup is finished, and you should be ready to connect the SLA battery. Make sure to double-check the polarity of all power connections (power cable, battery cable, motors, and encoders) before proceeding. Once the battery is connected, all motors and encoders should light up, indicating that they are powered on.</p> <p>Note</p> <p>For battery charging instructions, please see the Usage guide.</p>"},{"location":"software/","title":"Software","text":"<p>This page provides instructions for:</p> <ul> <li>Configuring a new mini PC to run real-time controllers.</li> <li>Setting up the TidyBot++ codebase on the mini PC.</li> </ul> <p>Note</p> <p>These setup steps are only necessary when working with the real robot. If you are only using simulation, please follow the instructions in the codebase README. Note that our entire policy learning pipeline (phone teleoperation, data collection, policy training, and policy inference) can be tested in simulation without a physical robot.</p>"},{"location":"software/#mini-pc-setup","title":"Mini PC setup","text":"<p>This section describes how we configured a \"Beelink S12 Pro\" mini PC as an onboard computer for running real-time controllers. While these steps are tailored for this model, they should apply to other mini PCs as well.</p>"},{"location":"software/#ubuntu-22","title":"Ubuntu 22","text":"<p>Follow these steps to create a bootable USB drive for Ubuntu 22:</p> <ol> <li>Go to the Ubuntu 22 release page.</li> <li>Scroll down and download the <code>ubuntu-22.04.4-desktop-amd64.iso</code> image file.</li> <li>Download and install balenaEtcher.</li> <li>Use balenaEtcher to flash the ISO image onto a USB drive.</li> </ol> <p>Note</p> <p>We used Ubuntu 22.04.4 LTS. Newer versions should also work but may require additional modifications.</p> <p>Tip</p> <p>We recommend using a USB drive that supports USB 3.0 or higher. The Ubuntu installation will take much longer with a USB 2.0 drive.</p> <p>Next, follow these steps to install Ubuntu 22 on the mini PC:</p> <ol> <li>Insert the Ubuntu 22 USB drive into the mini PC.</li> <li>Power on the mini PC and press <code>&lt;F7&gt;</code> to enter the boot menu.</li> <li>Select the <code>UEFI USB</code> option to boot from the USB drive.</li> <li>When prompted, select Install Ubuntu.</li> <li>When prompted, connect to a Wi-Fi network.</li> <li>In the Updates and other Software screen, choose Minimal installation (instead of Normal installation) and do not check the box for Install third-party software.</li> <li>In the Installation type screen, select Erase disk and install Ubuntu.</li> <li>Continue with the installation procedure until completion.</li> </ol> <p>Tip</p> <p>If the boot menu does not appear, restart the mini PC and repeatedly press <code>&lt;F7&gt;</code> during the boot process.</p> <p>Note</p> <p>Because this mini PC is intended to run performance-critical real-time controllers, we use the \"minimal installation\" to avoid unnecessary software.</p>"},{"location":"software/#automatic-power-on","title":"Automatic power on","text":"<p>For convenience, we recommend configuring the mini PC to automatically power on when plugged in. Follow these steps to enable this feature in the BIOS:</p> <ol> <li>Reboot the mini PC and press <code>&lt;Del&gt;</code> to enter BIOS setup.</li> <li>Navigate to <code>Chipset &gt; PCH-IO Configuration &gt; State After G3</code>.</li> <li>Change <code>S5 State</code> to <code>S0 State</code>.</li> <li>Save changes and exit.</li> <li>Turn off the mini PC and unplug the power adapter.</li> <li>Plug the power adapter back in and verify that the mini PC powers on automatically.</li> </ol>"},{"location":"software/#headless-setup","title":"Headless setup","text":"<p>The mini PC will mainly be used in headless mode without a monitor via SSH and <code>tmux</code>, as it is inconvenient to keep a monitor connected to a moving mobile base.</p> <p>Run the following command to install SSH and <code>tmux</code>:</p> <pre><code>sudo apt install openssh-server tmux\n</code></pre> <p>We use <code>tmux</code> to create persistent sessions that continue running if the SSH connection drops. Below is an example headless workflow using <code>tmux</code>:</p> <ol> <li>SSH into the mini PC: <pre><code>ssh &lt;username&gt;@&lt;minipc-hostname&gt;\n</code></pre></li> <li>If there is no existing <code>tmux</code> session, start a new one: <pre><code>tmux\n</code></pre> Or, if a <code>tmux</code> session already exists, reattach to it: <pre><code>tmux a\n</code></pre></li> <li>Run tasks in the <code>tmux</code> session (tasks continue to run even if your connection drops).</li> <li>Create new windows within the <code>tmux</code> session  as needed to run tasks in parallel.</li> <li>If the SSH connection drops, reconnect SSH and reattach to the <code>tmux</code> session.</li> </ol> <p>Tip</p> <p>If you are on a network with no DNS server, try appending <code>.local</code> to the hostname when connecting via SSH:</p> <pre><code>ssh &lt;username&gt;@&lt;minipc-hostname&gt;.local\n</code></pre> <p>Tip</p> <p>If you have not used <code>tmux</code> before, please see the \"Sessions\" and \"Windows\" sections in the <code>tmux</code> cheat sheet.</p> <p>Tip</p> <p>By default, mouse scrolling is disabled in <code>tmux</code>. Follow these steps to enable it:</p> <ol> <li>Open <code>~/.tmux.conf</code> in a text editor.</li> <li>Add the following line: <pre><code>set -g mouse on\n</code></pre></li> <li>Save and exit.</li> <li>Reload the config file: <pre><code>tmux source ~/.tmux.conf\n</code></pre></li> </ol>"},{"location":"software/#cpu-frequency-scaling","title":"CPU frequency scaling","text":"<p>To help minimize latency when running real-time controllers, follow these steps to disable CPU frequency scaling:</p> <ol> <li>Install <code>cpufrequtils</code>: <pre><code>sudo apt install cpufrequtils\n</code></pre></li> <li>Check the current CPU frequency policy: <pre><code>cpufreq-info -p\n</code></pre> Example output showing that the <code>powersave</code> governor is active: <pre><code>400000 4000000 powersave\n700000 3400000 powersave\n</code></pre></li> <li>To disable scaling, set the <code>performance</code> governor as default: <pre><code>sudo sh -c 'echo \"GOVERNOR=performance\" &gt; /etc/default/cpufrequtils'\n</code></pre></li> </ol> <p>This change will take effect upon reboot.</p>"},{"location":"software/#wi-fi-power-management","title":"Wi-Fi power management","text":"<p>For improved performance and latency when communicating over Wi-Fi, power management should be disabled.</p> <p>Run this command to show the current wireless interface power management settings:</p> <pre><code>iwconfig\n</code></pre> <p>If <code>Power Management: on</code> appears in the output, follow these steps to disable Wi-FI power management:</p> <ol> <li>Open <code>/etc/NetworkManager/conf.d/default-wifi-powersave-on.conf</code> in a text editor.</li> <li>Change <code>wifi.powersave</code> to <code>wifi.powersave = 2</code>.</li> <li>Save and exit.</li> </ol>"},{"location":"software/#real-time-kernel","title":"Real-time kernel","text":"<p>For optimal real-time performance of controllers running on the mini PC, we highly recommend installing the <code>PREEMPT_RT</code> real-time kernel.</p> <p>Note</p> <p>The real-time kernel is not compatible with Nvidia drivers.</p> <p>Building the real-time kernel</p> <p>Please follow the setup guide from the Franka documentation to build the real-time kernel.</p> <p>Note</p> <p>If you prefer to install the exact kernel image we built rather than building it yourself, you can download our files here:</p> <ul> <li><code>linux-image-6.8.2-rt11_6.8.2-1_amd64.deb</code></li> <li><code>linux-headers-6.8.2-rt11_6.8.2-1_amd64.deb</code></li> </ul> <p>To install these files, run the following command:</p> <pre><code>sudo dpkg -i linux-image-6.8.2-rt11_6.8.2-1_amd64.deb linux-headers-6.8.2-rt11_6.8.2-1_amd64.deb\n</code></pre> <p>If this installs successfully, you can skip ahead to the section on setting the default boot option.</p> <p>Below is a summary of the steps we followed:</p> <ol> <li>Install required dependencies: <pre><code>sudo apt-get install build-essential bc curl ca-certificates gnupg2 libssl-dev lsb-release libelf-dev bison flex dwarves zstd libncurses-dev debhelper\n</code></pre></li> <li>Download the source files: <pre><code>mkdir linux-6.8.2-rt11\ncd linux-6.8.2-rt11\ncurl -SLO https://mirrors.edge.kernel.org/pub/linux/kernel/v6.x/linux-6.8.2.tar.xz\ncurl -SLO https://mirrors.edge.kernel.org/pub/linux/kernel/v6.x/linux-6.8.2.tar.sign\ncurl -SLO https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.8/patch-6.8.2-rt11.patch.xz\ncurl -SLO https://mirrors.edge.kernel.org/pub/linux/kernel/projects/rt/6.5/patch-6.8.2-rt11.patch.sign\n</code></pre></li> <li>Extract and patch the kernel: <pre><code>xz -d *.xz\ntar xf linux-*.tar\ncd linux-*/\npatch -p1 &lt; ../patch-*.patch\ncp -v /boot/config-$(uname -r) .config\nmake olddefconfig\nmake menuconfig\n</code></pre></li> <li>In the menu interface that opens, make the following changes and save before exiting:<ul> <li>Under General setup &gt; Preemption Model, select Fully Preemptible Kernel (Real-Time).</li> <li>Under Cryptographic API &gt; Certificates for signature checking &gt; Additional X.509 keys for default system keyring, remove <code>\"debian/canonical-certs.pem\"</code>.</li> <li>Under Cryptographic API &gt; Certificates for signature checking &gt; X.509 certificates to be preloaded into the system blacklist keyring, remove <code>\"debian/canonical-revoked-certs.pem\"</code>.</li> <li>Under Device Drivers &gt; Graphics support &gt; Intel 8xx/9xx/G3x/G4x/HD Graphics, press <code>&lt;N&gt;</code> to exclude (this option addresses i915 latency spikes in <code>cyclictest</code>).</li> </ul> </li> <li>Build the kernel: <pre><code>make -j$(nproc) bindeb-pkg\n</code></pre></li> <li>Once it has been built, install the kernel: <pre><code>sudo dpkg -i linux-image-6.8.2-rt11_6.8.2-1_amd64.deb linux-headers-6.8.2-rt11_6.8.2-1_amd64.deb\n</code></pre></li> </ol> <p>Note</p> <p>We recommend installing the exact <code>PREEMPT_RT</code> version we used, as other versions may have issues such as broken Wi-Fi or Ethernet connectivity.</p> <p>Note</p> <p>One side effect of excluding the Intel graphics driver is that if you connect a monitor after the mini PC has already booted, it will not display anything. If you want to use a monitor, you can simply plug it in before booting the mini PC. If you prefer normal monitor behavior, you can include the Intel graphics driver when building your kernel (at the cost of worse latency performance).</p> <p>Tip</p> <p>Building the kernel in parallel can hide error messages. For clearer output, you can also build sequentially:</p> <pre><code>make bindeb-pkg\n</code></pre> <p>However, note that a sequential build can take up to 4 hours.</p> <p>Setting the default boot option</p> <p>Follow these steps to set the new real-time kernel as the default boot option:</p> <ol> <li>Open <code>/etc/default/grub</code> in a text editor.</li> <li>Change <code>GRUB_DEFAULT=0</code> to: <pre><code>GRUB_DEFAULT=\"Advanced options for Ubuntu&gt;Ubuntu, with Linux 6.8.2-rt11\"\n</code></pre></li> <li>Save and exit.</li> <li>Update GRUB: <pre><code>sudo update-grub\n</code></pre></li> </ol> <p>Note</p> <p>If you are not using <code>6.8.2-rt11</code>, adjust the text to match your kernel version. You can check <code>/boot/grub/grub.cfg</code> for the correct identifier of the real-time kernel menu entry.</p>"},{"location":"software/#verification","title":"Verification","text":"<p>Reboot the mini PC, then perform the following checks:</p> <p>CPU frequency scaling</p> <p>Run this command to verify that CPU frequency scaling is disabled:</p> <pre><code>cpufreq-info -p\n</code></pre> <p>You should see the <code>performance</code> governor in the output:</p> <pre><code>700000 3400000 performance\n</code></pre> <p>Wi-Fi power management</p> <p>Run this command to verify that Wi-Fi power management is disabled:</p> <pre><code>iwconfig\n</code></pre> <p>You should see this line in the output:</p> <pre><code>Power Management:off\n</code></pre> <p>You can also ping the mini PC from your dev machine to verify that you get ping times of 1-3 ms. When power management is enabled, ping times can be much higher (40-100 ms).</p> <p>Real-time kernel</p> <p>Run this command to confirm that the real-time kernel is in use:</p> <pre><code>uname -a\n</code></pre> <p>You should see the <code>PREEMPT_RT</code> label in the output, for example:</p> <pre><code>Linux minipc-01 6.8.2-rt11 #1 SMP PREEMPT_RT Sun Oct 27 18:09:44 PDT 2024 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre> <p>If you see <code>generic</code> in the output, then your mini PC is still using the generic kernel, not the real-time one:</p> <pre><code>Linux minipc-01 6.8.0-48-generic #48~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Mon Oct  7 11:24:13 UTC 2 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre> <p>Latency testing</p> <p>Follow these steps to measure the real-time latency performance of your system with the <code>cyclictest</code> tool:</p> <ol> <li>Install the <code>rt-tests</code> package: <pre><code>sudo apt install rt-tests\n</code></pre></li> <li>Run the latency test: <pre><code>sudo cyclictest --mlockall --smp --priority=80 --interval=200 --distance=0 --duration=1h\n</code></pre></li> <li>Wait 1 hour for the test to finish.</li> </ol> <p>The test will output latency statistics per CPU core. In our tests with the \"Beelink S12 Pro\", the generic kernel showed significantly higher latencies, as expected:</p> Kernel Max latency <code>6.8.2-rt11</code> &lt; 20 us <code>6.8.0-48-generic</code> 1000+ us <p>Note</p> <p>We recommend unplugging peripherals such as monitors during the test as they can cause latency spikes. We performed our tests over SSH in a <code>tmux</code> session.</p> <p>Tip</p> <p>Please see the wiki page to learn more about <code>cyclictest</code>.</p>"},{"location":"software/#arm-setup","title":"Arm setup","text":"<p>Follow the steps below to configure the mini PC for controlling your robotic arm.</p> KinovaARX5 <p>Ethernet setup</p> <p>Follow these steps to set up an Ethernet connection to the Kinova arm:</p> <ol> <li>Create a new Ethernet connection named <code>Kinova</code> with static IP address <code>192.168.1.11</code>: <pre><code>sudo nmcli con add type ethernet con-name Kinova ifname &lt;ethernet-interface&gt; ipv4.method manual ipv4.addresses 192.168.1.11/24\n</code></pre> Make sure to replace <code>&lt;ethernet-interface&gt;</code> with the actual interface name, which you can find by running <code>ip link</code>.</li> <li>List available network connections and verify that the new <code>Kinova</code> connection is present: <pre><code>nmcli con\n</code></pre></li> <li>Turn on the arm and connect its Ethernet cable to the mini PC.</li> <li>Activate the <code>Kinova</code> Ethernet connection: <pre><code>sudo nmcli con up Kinova\n</code></pre></li> <li>Test the connection by pinging the arm: <pre><code>ping 192.168.1.10\n</code></pre></li> </ol> <p>Communication test</p> <p>Run the following command to perform a simple network communication test where we ping the arm at 1 kHz for 100 seconds:</p> <pre><code>sudo ping 192.168.1.10 -i 0.001 -D -c 100000 -s 1200\n</code></pre> <p>The output should show 0% packet loss and round-trip times (RTTs) well under 1 ms. Here is some example output:</p> <pre><code>100000 packets transmitted, 100000 received, 0% packet loss, time 99999ms\nrtt min/avg/max/mdev = 0.143/0.252/0.495/0.059 ms\n</code></pre> <p>CAN setup</p> <p>Follow the setup instructions in the ARX5 SDK to set up the USB-to-CAN adapter for your ARX5 arm. The only modification required for TidyBot++ is to replace all instances of <code>can0</code> with <code>can1</code>, as <code>can0</code> is already used by the mobile base.</p>"},{"location":"software/#codebase-setup","title":"Codebase setup","text":"<p>This section describes how to set up the codebase on the mini PC for use with the real robot.</p>"},{"location":"software/#real-time-priority","title":"Real-time priority","text":"<p>To ensure optimal performance and minimal latency, the low-level controllers should be run with real-time process priority.</p> <p>Follow these steps to allow all users to set real-time priority for processes:</p> <ol> <li>Open <code>/etc/security/limits.d/99-realtime.conf</code> in a text editor.</li> <li>Add the following lines (including the <code>*</code> symbols): <pre><code>* soft rtprio 99\n* hard rtprio 99\n</code></pre></li> <li>Save and exit.</li> </ol> <p>Note</p> <p>These permission changes take effect only after logging out and logging back in.</p>"},{"location":"software/#canivore","title":"CANivore","text":"<p>Follow these steps to enable support for the CANivore USB-to-CAN adapter, which is used to communicate with the drive system:</p> <ol> <li>Add the CTR Electronics package repository: <pre><code>export YEAR=2024\nsudo curl -s --compressed -o /usr/share/keyrings/ctr-pubkey.gpg \"https://deb.ctr-electronics.com/ctr-pubkey.gpg\"\nsudo curl -s --compressed -o /etc/apt/sources.list.d/ctr${YEAR}.list \"https://deb.ctr-electronics.com/ctr${YEAR}.list\"\n</code></pre></li> <li>Install the <code>canivore-usb</code> package: <pre><code>sudo apt update\nsudo apt install canivore-usb\n</code></pre></li> </ol> <p>Note</p> <p>For more details, see the official CANivore documentation.</p>"},{"location":"software/#gamepad","title":"Gamepad","text":"<p>The gamepad is used for teleoperating the mobile base. Follow these steps to enable gamepad access in headless sessions:</p> <ol> <li>Open <code>/etc/udev/rules.d/99-gamepad.rules</code> in a text editor.</li> <li>Add the following lines: <pre><code># Logitech F710\nSUBSYSTEM==\"input\", ATTRS{idVendor}==\"046d\", ATTRS{idProduct}==\"c21f\", MODE=\"0666\"\n</code></pre></li> <li>Save and exit.</li> <li>Apply the new udev rule: <pre><code>sudo udevadm control --reload-rules\nsudo udevadm trigger\n</code></pre></li> </ol> <p>Tip</p> <p>To confirm that inputs are being received from the gamepad, you can use <code>jstest</code>:</p> <pre><code>sudo apt install joystick\njstest /dev/input/js0\n</code></pre> <p>Here is some example <code>jstest</code> output:</p> <pre><code>Driver version is 2.1.0.\nJoystick (Logitech Gamepad F710) has 8 axes (X, Y, Z, Rx, Ry, Rz, Hat0X, Hat0Y)\nand 11 buttons (BtnA, BtnB, BtnX, BtnY, BtnTL, BtnTR, BtnSelect, BtnStart, BtnMode, BtnThumbL, BtnThumbR).\nTesting ... (interrupt to exit)\nAxes:  0:     0  1:    -2  2:-32767  3:     0  4:    -2  5:-32767  6:     0  7:     0 Buttons:  0:off  1:off  2:off  3:off  4:off  5:off  6:off  7:off  8:off  9:off 10:off\n</code></pre>"},{"location":"software/#logitech-camera","title":"Logitech camera","text":"<p>If you plan to use a Logitech camera (as a base or wrist camera), follow these steps to enable camera access in headless sessions:</p> <ol> <li>Open <code>/etc/udev/rules.d/99-webcam.rules</code> in a text editor.</li> <li>Add the following lines: <pre><code># Logitech C930e\nSUBSYSTEMS==\"usb\", ATTRS{idVendor}==\"046d\", ATTRS{idProduct}==\"0843\", MODE=\"0666\"\n</code></pre></li> <li>Save and exit.</li> <li>Apply the new udev rule: <pre><code>sudo udevadm control --reload-rules\nsudo udevadm trigger\n</code></pre></li> </ol>"},{"location":"software/#mamba-environment","title":"Mamba environment","text":"<p>Please install Mamba following the official instructions (we use the Miniforge distribution).</p> <p>Then run the following commands to set up the Mamba environment:</p> <pre><code>git clone https://github.com/jimmyyhwu/tidybot2.git\ncd ~/tidybot2\nmamba create -n tidybot2 python=3.10.14\nmamba activate tidybot2\npip install -r requirements.txt\n</code></pre>"},{"location":"software/#constants","title":"Constants","text":"<p>There are a few hardware-specific constants in the codebase which need to be modified before you run the robot. Please follow the steps below to set these constants in <code>constants.py</code>:</p> <p>Encoder offsets</p> <p>Each mobile base has a unique set of encoder offsets which are used by the low-level controller to determine the absolute steer position of each caster.</p> <p>First, follow these steps to elevate the casters off the floor:</p> <ol> <li>Double-check that all components inside the mobile base, including the camping battery and SLA battery, are fully secured.</li> <li>Ensure that all cables are properly secured and kept away from the caster module gears.</li> <li>Turn the mobile base onto its side, with the right side of the base facing up.</li> </ol> <p>Manually move all casters to the zero steer position. This is the configuration assumed by the base when driving forward, with all casters in the trailing position:</p> <p></p> <p>Note</p> <p>In these photos, the robot's forward (+x) direction is toward the right side.</p> <p>Place a wheel alignment jig on each of the top wheels to create a flat surface:</p> <p></p> <p>Use a straightedge to align the top wheels so that they face as precisely forward as possible:</p> <p></p> <p>Repeat this process for the bottom two wheels as well.</p> <p>Once all four casters are aligned, run the following Python code snippet to print the current encoder magnet offsets:</p> <pre><code>from base_controller import Vehicle\nvehicle = Vehicle()\nvehicle.get_encoder_offsets()\n</code></pre> <p>In <code>constants.py</code>, update <code>ENCODER_MAGNET_OFFSETS</code> with the printed values.</p> <p>Tip</p> <p>If you find later on that your base odometry is not accurate (e.g., the robot takes a curved path or rotates slightly when commanded to go straight), you can improve its performance by fine-tuning the encoder offsets in increments of 1/4096.</p> <p>Base dimensions</p> <p>The constants <code>h_x</code> and <code>h_y</code> in <code>constants.py</code> specify the distance (in the <code>x</code> and <code>y</code> directions) from the center of the mobile base to each caster's steer axis. If you are using one of our reference designs, simply uncomment the appropriate line in <code>constants.py</code>.</p> <p>For the larger Kinova or Franka designs:</p> <pre><code>h_x, h_y = 0.190150 * np.array([1.0, 1.0, -1.0, -1.0]), 0.170150 * np.array([-1.0, 1.0, 1.0, -1.0])  # Kinova / Franka\n</code></pre> <p>For the smaller ARX5 design:</p> <pre><code>h_x, h_y = 0.140150 * np.array([1.0, 1.0, -1.0, -1.0]), 0.120150 * np.array([-1.0, 1.0, 1.0, -1.0])  # ARX5\n</code></pre> <p>If you are using a custom frame size, please modify <code>h_x</code> and <code>h_y</code> to match your robot's measurements.</p> <p>Logitech camera</p> <p>If you plan to use a Logitech camera, please specify its serial number in <code>constants.py</code>. Retrieve the camera's serial number using either of these commands:</p> <pre><code>lsusb -v -d 046d:0843 | grep iSerial\nudevadm info -n video0 | grep ID_SERIAL_SHORT\n</code></pre> <p>Then, set <code>BASE_CAMERA_SERIAL</code> in <code>constants.py</code> to your camera's serial number.</p>"},{"location":"software/#gamepad-teleop-service","title":"Gamepad teleop service","text":"<p>It can be useful to automatically start gamepad teleoperation on boot, such as during robot transport. Follow these steps to create a <code>systemd</code> service for that purpose:</p> <ol> <li>Open <code>/etc/systemd/system/gamepad-teleop.service</code> in a text editor.</li> <li>Add the following contents: <pre><code>[Unit]\nDescription=Gamepad Teleop\n\n[Service]\nExecStart=/bin/bash -c \"/home/jwu/miniforge3/envs/tidybot2/bin/python /home/jwu/tidybot2/gamepad_teleop.py\"\nUser=jwu\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> Make sure to replace the paths in <code>ExecStart</code> with the correct paths for your setup.</li> <li>Save and exit.</li> <li>Register and start the service: <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable gamepad-teleop.service\nsudo systemctl start gamepad-teleop.service\nsudo systemctl status gamepad-teleop.service\n</code></pre></li> </ol> <p>Note</p> <p>To disable the service later, run the following commands:</p> <pre><code>sudo systemctl stop gamepad-teleop.service\nsudo systemctl disable gamepad-teleop.service\n</code></pre>"},{"location":"software/#arm-setup_1","title":"Arm setup","text":"KinovaARX5 <p>To use the Kinova Gen3 arm with our codebase, please follow the additional setup steps below:</p> <p>Kortex API</p> <p>Download the Kortex Python API from either of these links:</p> <ul> <li>Kinova Artifactory</li> <li><code>kortex_api-2.6.0.post3-py3-none-any.whl</code></li> </ul> <p>Install the downloaded wheel file in the <code>tidybot2</code> Mamba environment:</p> <pre><code>pip install kortex_api-2.6.0.post3-py3-none-any.whl\npip install protobuf==3.20.0  # kortex_api specifies protobuf==3.5.1 which is outdated\n</code></pre> <p>Wrist camera</p> <p>If you need to read images from the Kinova wrist camera, please follow these steps to install OpenCV with GStreamer support:</p> <ol> <li>Install GStreamer: <pre><code>sudo apt install libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-bad1.0-dev gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav gstreamer1.0-tools gstreamer1.0-x gstreamer1.0-alsa gstreamer1.0-gl gstreamer1.0-gtk3 gstreamer1.0-qt5 gstreamer1.0-pulseaudio\n</code></pre></li> <li>Download our pre-built OpenCV wheel which includes GStreamer support: <code>opencv_python-4.9.0.80-cp310-cp310-linux_x86_64.whl</code></li> <li>Install the downloaded wheel file: <pre><code>pip install --force-reinstall --no-deps opencv_python-4.9.0.80-cp310-cp310-linux_x86_64.whl\n</code></pre></li> <li>Verify that the installed OpenCV has GStreamer support: <pre><code>python -c \"import cv2 as cv; print(cv.getBuildInformation())\" | grep GStreamer\n</code></pre> You should see the following line in the output: <pre><code>    GStreamer:                   YES (1.20.3)\n</code></pre></li> </ol> <p>Note</p> <p>If you are not using the same mini PC as us, you may need to build the Python wheel yourself. Follow these steps to build OpenCV with GStreamer support:</p> <ol> <li>Install OpenCV build dependencies: <pre><code>sudo apt install python3-dev python3-numpy libavcodec-dev libavformat-dev libswscale-dev libgstreamer-plugins-base1.0-dev libgstreamer1.0-dev libgtk-3-dev\n</code></pre></li> <li>Create a dedicated Mamba environment to avoid conflicts: <pre><code>mamba create -n opencv-build python=3.10.14\npip install scikit-build==0.17.6 numpy==1.26.4\nmamba activate opencv-build\n</code></pre></li> <li>Build OpenCV from source with GStreamer support (using the <code>opencv-build</code> environment): <pre><code>git clone --recursive https://github.com/opencv/opencv-python.git\ngit checkout tags/80\nexport CMAKE_ARGS=\"-DWITH_GSTREAMER=ON\"\npip wheel . --verbose\n</code></pre></li> <li>Locate the resulting wheel file: <code>opencv_python-4.9.0.80-cp310-cp310-linux_x86_64.whl</code></li> </ol> <p>Torque offsets</p> <p>If you have never used torque control on the Kinova arm before, please follow these steps to zero the torque offsets:</p> <ol> <li>Ensure the surrounding area is clear of obstacles, as the arm will move to the zero configuration and may sweep a large space while doing so.</li> <li>Run the following Python code snippet: <pre><code>from kinova import TorqueControlledArm\n\narm = TorqueControlledArm()\narm.zero_torque_offsets()\narm.disconnect()\n</code></pre></li> <li>Follow the terminal prompts and press <code>&lt;Enter&gt;</code> after each stage.</li> </ol> <p>ARX5 controller</p> <p>To use the ARX5 arm with our codebase, please install the ARX5 SDK following the steps below:</p> <ol> <li>Switch to the <code>arx5</code> branch of our codebase, which adds support for the ARX5 arm: <pre><code>git clone https://github.com/jimmyyhwu/tidybot2.git\ncd ~/tidybot2\ngit fetch origin arx5  # Branch for ARX5 arm\ngit checkout arx5\n</code></pre></li> <li>Install the <code>arx5-sdk</code> package within the <code>tidybot2</code> directory: <pre><code>cd ~/tidybot2\ngit clone https://github.com/real-stanford/arx5-sdk.git\ncd arx5-sdk\ngit checkout d046707  # Last tested commit\nmamba env create -f conda_environments/py310_environment.yaml\nmamba activate arx-py310\nmkdir build &amp;&amp; cd build\ncmake .. &amp;&amp; make -j\n</code></pre></li> <li>Install additional dependencies in the <code>arx-py310</code> environment: <pre><code>pip install mujoco==3.2.4 scipy==1.12.0\n</code></pre></li> </ol> <p>You should now be able to use the ARX5 arm following the same steps described in the Usage page.</p> <p>Note</p> <p>Be sure to activate the <code>arx-py310</code> Mamba environment in the terminal session where you run <code>arm_server.py</code>.</p>"},{"location":"usage/","title":"Usage","text":"<p>Welcome to the TidyBot++ usage guide! This page provides instructions for operating the robot, including teleoperation, data collection, and policy inference.</p> <p>Note</p> <p>Before proceeding, please make sure that you have already set up the mini PC and codebase following the steps on the Software page.</p> <p>Tip</p> <p>If you plan to use phone teleoperation, data collection, or policy inference on the real robot, we recommend trying these components in simulation first. You can find instructions in the Usage section of the codebase README.</p>"},{"location":"usage/#general-safety","title":"General safety","text":"<p>It is very important to monitor the robot closely at all times during operation. The mobile base is equipped with powerful motors, which can cause damage or injury if not handled properly. The open-source software includes the following safety features to help mitigate risk:</p> <p>Enabling device</p> <p>Both teleoperation and policy inference use a mobile phone as an enabling device (deadman switch). This means the robot will only move while the user is actively enabling the robot. If the user stops providing input or the connection is lost, then the robot will stop moving. This helps prevent unintended robot movements.</p> <p>Torque limits</p> <p>The base controller applies torque limits to the mobile base motors to prevent the base from exerting excessive forces. These limits are set to a small fraction of the maximum torque capacity of the motors. Here is a video demonstration showing the torque limits in action:</p> <p>Compliant arm</p> <p>The arm controller is compliant, allowing the arm to yield when it encounters external forces. This behavior helps prevent damage to both the arm and its surrounding environment.</p> <p>Note</p> <p>Additional safety measures are highly recommended, especially if you plan to modify the low-level controller. Examples of additional measures include:</p> <ul> <li>E-stop on the mobile base</li> <li>Wireless remote E-stop</li> <li>Safety barriers around the robot's operating area</li> </ul>"},{"location":"usage/#power-on-procedure","title":"Power on procedure","text":""},{"location":"usage/#portable-power-station","title":"Portable power station","text":"<p>The portable power station (camping battery) powers the mini PC and onboard arm. Follow these steps to power on the robot:</p> <ol> <li>Unplug the camping battery's charging cable and check the battery level.</li> <li>Press the button next to the AC outlets to turn them on.</li> <li>The mini PC should turn on automatically.</li> <li>Power on the onboard arm.</li> </ol> <p>Tip</p> <p>If the battery level runs low, just plug the charging cable back in (about 1 hour to recharge). The robot will no longer be mobile, but you can continue using it while the battery is charging.</p>"},{"location":"usage/#sla-battery","title":"SLA battery","text":"<p>The sealed lead acid (SLA) battery powers the mobile base motors and encoders. Follow these steps to connect the SLA battery to the robot:</p> <ol> <li>Place the SLA battery into the battery mount on the back of the mobile base.</li> <li>Tighten the rope ratchet to secure the battery.</li> <li>Connect the battery to the robot's power cable.</li> </ol> <p>See video (2x speed):</p> KinovaFrankaARX5 <p></p> <p></p> <p></p> <p>Note</p> <p>Please remember to recharge the SLA battery after use. Leaving an SLA battery in a discharged state for an extended period of time can degrade its performance and shorten its lifespan.</p> <p>Note</p> <p>The SLA battery typically lasts all day and can be hot-swapped when it runs low without having to turn off the robot.</p> <p>Tip</p> <p>Once the battery is connected, all motors and encoders should light up. If nothing happens, check whether the 120A circuit breaker has been accidentally tripped. Pressing the red manual trip button opens the circuit, which causes the reset button to pop out (left photo). To close the circuit, push the reset button back in (right photo).</p> <p> </p> <p>Tip</p> <p>The Anderson connectors can be tricky to operate. Below are videos demonstrating how to plug and unplug them:</p> <p> </p>"},{"location":"usage/#gamepad-teleoperation","title":"Gamepad teleoperation","text":"<p>Follow these steps to control the mobile base with the wireless gamepad:</p> <ol> <li>Plug the gamepad's USB receiver into the mini PC.</li> <li>SSH into the mini PC and start a <code>tmux</code> session.</li> <li>Inside the <code>tmux</code> session, run: <pre><code>python gamepad_teleop.py\n</code></pre></li> <li>Press the \"Start\" button on the gamepad to begin teleoperation.</li> <li>Hold down the left shoulder button to \"enable\" the robot.</li> <li>Move the two joysticks to control translation and rotation.</li> <li>Release the shoulder button at any time to \"disable\" the robot.</li> </ol> <p>Note</p> <p>The interface mode switch on the side of the gamepad should be set to \"X\" (XInput mode) rather than \"D\" (DirectInput mode).</p> <p>Tip</p> <p>Pressing the \"Mode\" button switches the left joystick and D-pad functionality. If the left joystick seems unresponsive, try pressing the \"Mode\" button.</p> <p>To control the robot in global frame rather than local frame, hold down the right shoulder button instead. Below are videos comparing local frame (left) and global frame (right) control:</p> <p>Note</p> <p>The global frame is set to the robot's current position when you press the \"Start\" button to begin teleoperation. To reset the global frame, press the \"Back\" button to stop teleoperation, then press \"Start\" again to restart and set a new global frame.</p> <p>Tip</p> <p>Use local frame if you are following behind the moving robot or riding on top of it. Use global frame if you are standing still while controlling the robot.</p>"},{"location":"usage/#phone-teleoperation","title":"Phone teleoperation","text":"<p>This section describes how to start the phone teleoperation system, connect your phone, and control the robot with it.</p>"},{"location":"usage/#starting-the-server","title":"Starting the server","text":"<p>Start the Flask server, which hosts the teleop web app:</p> Real robotSimulation <ol> <li>SSH into the mini PC and start a <code>tmux</code> session  with three windows.</li> <li>In <code>tmux</code> window 1, run: <pre><code>python base_server.py\n</code></pre></li> <li>In <code>tmux</code> window 2, run: <pre><code>python arm_server.py\n</code></pre></li> <li>In <code>tmux</code> window 3, run: <pre><code>python main.py --teleop\n</code></pre></li> </ol> <p>This starts a Flask server on port <code>5000</code>, which you can connect to from your phone.</p> <p>Tip</p> <p>If you have not used <code>tmux</code> before, please see the \"Sessions\" and \"Windows\" sections in the <code>tmux</code> cheat sheet.</p> <p>On your dev machine, run:</p> <pre><code>python main.py --sim --teleop\n</code></pre> <p>This starts a Flask server on port <code>5000</code>, which you can connect to from your phone.</p>"},{"location":"usage/#connecting-the-client","title":"Connecting the client","text":"<p>Follow these steps to connect your phone to the server and start teleoperation:</p> <ol> <li>Connect your phone to the same network as the Flask server.</li> <li>Open the XR Browser or XRViewer app on your iPhone and navigate to <code>&lt;server-hostname&gt;:5000</code> to open the teleoperation web app.</li> <li>Align your phone with the robot (see photos below).</li> <li>Press \"Start episode\" to begin teleoperation.</li> </ol> <p>Note</p> <p>For proper coordinate frame alignment, the phone should face the same direction as the robot when you press \"Start episode\". You can achieve this by physically placing the phone on the arm or base like in these photos:</p> <p> </p> <p>Note</p> <p>To run the teleop web app, both the server and the phone need internet access.</p> <p>Tip</p> <p>If <code>&lt;server-hostname&gt;:5000</code> does not connect, try <code>&lt;server-hostname&gt;.local:5000</code> instead. If that does not connect either, try the IP address of the mini PC instead of the hostname.</p>"},{"location":"usage/#controlling-the-robot","title":"Controlling the robot","text":"<p>To control the arm, hold your thumb on the center of the screen (it will turn blue) and move your phone. The arm will try to match the phone's relative translation (left video) and rotation (right video):</p> <p>Tip</p> <p>If the arm ends up in an undesirable configuration or enters a fault state (e.g., self-collision), you can easily reset it from the phone web app:</p> <ol> <li>Press \"End episode\".</li> <li>Make sure the space around the arm is clear.</li> <li>Press \"Reset env\" to automatically clear faults and return the arm to its starting configuration.</li> <li>Align your phone with the robot.</li> <li>Press \"Start episode\".</li> </ol> <p>Tip</p> <p>If the arm is moving in an unintuitive way, these tips may be helpful:</p> <ul> <li>After pressing \"Start episode\", wait until the web app has fully loaded before moving your phone.</li> <li>Hold your phone upright in portrait orientation, with the top edge facing up, not forward.</li> <li>Make sure your phone is locked to portrait orientation.</li> <li>Keep your body aligned with the robot so that you are both facing the same direction.</li> </ul> <p>Tip</p> <p>If your hand position feels uncomfortable, you can release the screen at any time to \"disable\" the robot. The robot will hold its current pose while disabled, allowing you to reposition your phone before continuing.</p> <p>Tip</p> <p>The numbers on the phone screen show the current min/avg/max/std for the round-trip time (RTT) between your phone and the mini PC. On 5 GHz Wi-Fi, the expected average RTT is around 7 ms. In some environments (e.g., a crowded conference venue with many wireless devices), the connection quality may degrade, causing large latency spikes that significantly worsen the teleoperation experience. In such cases, we recommend using a USB-C to Ethernet adapter to create a wired Ethernet connection between your phone and the mini PC.</p> <p>To precisely control the gripper width, slide your thumb up and down on the screen:</p> <p>To control the mobile base, hold your thumb on the right edge of the screen (it will turn red) and move your phone to direct the base's movement:</p> <p>Tip</p> <p>The base is controlled by moving the phone, not by sliding your thumb on the screen.</p> <p>Here is a video (4x speed) showing how we use the phone interface to teleoperate the load dishwasher task:</p> <p>Tip</p> <p>Here are a few other tips that might be helpful:</p> <ul> <li>Avoid extending the arm too far, as it can enter a singularity state. Instead, move the mobile base forward.</li> <li>If you restart the Flask server, you should also refresh the web app page on your phone.</li> <li>In low-texture environments, phone teleoperation is more prone to drifting due to weaker visual feature tracking.</li> <li>If the mobile base experiences wheel slip (e.g., when opening a heavy door), the base odometry may drift, causing the robot and phone coordinate frames to become misaligned. If this happens, please start a new episode.</li> </ul> Simultaneous teleoperation <p>The teleoperation system also supports using a second phone to simultaneously move the base while the arm is being controlled. This enables more efficient execution of tasks such as wipe countertop, as shown in the video below (4x speed):</p> <p></p> <p>However, this setup has a steeper learning curve, so we recommend starting with a single phone.</p>"},{"location":"usage/#data-collection","title":"Data collection","text":"<p>To set up data collection, please follow the Phone teleoperation section to start the Flask server and connect the phone client. When starting the server, add the <code>--save</code> flag to indicate that episodes should be saved to disk, and use <code>--output-dir</code> to specify the desired save location (default is <code>data/demos</code>):</p> Real robotSimulation <pre><code>python main.py --teleop --save --output-dir data/demos\n</code></pre> <pre><code>python main.py --sim --teleop --save --output-dir data/demos\n</code></pre> <p>Next, follow these steps to collect a single episode of data:</p> <ol> <li>Press \"Start episode\" and perform one demonstration of the task.</li> <li>Press \"End episode\" to indicate that the episode has ended.</li> <li>In the terminal, enter <code>y</code> or <code>n</code> to indicate whether to save the episode.</li> <li>Use phone teleoperation to retract the arm and avoid potential collisions.</li> <li>Use phone teleoperation to return the mobile base to its starting position.</li> <li>Press \"Reset env\" to return the arm to its starting configuration.</li> <li>Manually reset objects in the environment.</li> </ol> <p>Repeat this process to collect additional episodes.</p> <p>Here is a video (4x speed) showing the full data collection process for two episodes of the load dishwasher task, including episode saving and environment resets:</p> <p>Note</p> <p>Data is recorded only when the robot is enabled. Periods when the robot is disabled are not recorded.</p> <p>Tip</p> <p>After collecting your first demonstration, it is a good idea to replay or visualize the data to check for any issues before proceeding further.</p> <p>Tip</p> <p>To discard the ongoing episode, press \"End episode\" and enter <code>n</code> in the terminal to skip saving.</p>"},{"location":"usage/#policy-inference","title":"Policy inference","text":"<p>To run policy inference, start the policy server on the GPU laptop with your desired checkpoint path:</p> <pre><code>python policy_server.py --ckpt-path &lt;checkpoint-path&gt;\n</code></pre> <p>Note</p> <p>The policy server runs within the <code>diffusion_policy</code> codebase (using the <code>robodiff</code> Mamba environment).</p> Real robotSimulation <p>On the mini PC, create an SSH tunnel to the policy server:</p> <pre><code>ssh -L 5555:localhost:5555 &lt;gpu-laptop-hostname&gt;\n</code></pre> <p>This makes the policy server accessible at <code>localhost:5555</code> on the mini PC.</p> <p>Next, run <code>main.py</code> to connect to the policy server via <code>localhost:5555</code> and start policy inference:</p> <pre><code>python main.py\n</code></pre> <p>As before, this will start a Flask server on port <code>5000</code>, which you can connect to from your phone.</p> <p>Note</p> <p>The Flask server (on the mini PC) is different from the policy server (on the GPU laptop).</p> <p>On your dev machine, create an SSH tunnel to the policy server:</p> <pre><code>ssh -L 5555:localhost:5555 &lt;gpu-laptop-hostname&gt;\n</code></pre> <p>This makes the policy server accessible at <code>localhost:5555</code> on your dev machine.</p> <p>Next, run <code>main.py</code> to connect to the policy server via <code>localhost:5555</code> and start policy inference:</p> <pre><code>python main.py --sim\n</code></pre> <p>As before, this will start a Flask server on port <code>5000</code>, which you can connect to from your phone.</p> <p>Note</p> <p>The Flask server (on your dev machine) is different from the policy server (on the GPU laptop).</p> <p>Follow these steps to run one episode of policy inference:</p> <ol> <li>Connect your phone and open the teleoperation web app.</li> <li>Align your phone with the robot.</li> <li>Press \"Start episode\".</li> <li>Hold your thumb on the phone screen to enable the robot and execute the policy.</li> <li>Lift your thumb at any time to disable the robot and pause execution.</li> <li>Press \"End episode\" to indicate that the episode has ended.</li> <li>Use phone teleoperation to retract the arm and avoid potential collisions.</li> <li>Use phone teleoperation to return the mobile base to its starting position.</li> <li>Press \"Reset env\" to return the arm to its starting configuration.</li> <li>Manually reset objects in the environment.</li> </ol> <p>Repeat this process to run additional episodes.</p> <p>Note</p> <p>Since the robot is teleoperated during environment resets, your phone still needs to be aligned with the robot when you press \"Start episode\" (to ensure proper coordinate frame alignment).</p>"},{"location":"usage/#power-off-procedure","title":"Power off procedure","text":""},{"location":"usage/#portable-power-station_1","title":"Portable power station","text":"<p>Follow these steps to power off the robot:</p> <ol> <li>Power off the onboard arm.</li> <li>Power off the mini PC (<code>sudo shutdown 0</code>).</li> <li>Power off the camping battery.</li> <li>Plug in the charging cable to recharge the camping battery.</li> </ol>"},{"location":"usage/#sla-battery_1","title":"SLA battery","text":"<p>Plug in the SLA battery charger:</p> <p></p> <p>Connect the SLA battery to the charger:</p> <p></p> <p>Note</p> <p>The SLA battery can also be charged without removing it from the robot.</p> <p>The charging mode should be set to \"AGM\" (press the \"Mode\" button to change it):</p> <p></p> <p>Once the battery is fully charged, the indicator light will turn green:</p> <p></p> <p>Tip</p> <p>We recommend inserting a battery flag into the Anderson SB50 connector to mark batteries after they are fully charged. This helps distinguish fully charged batteries from used ones:</p> <p></p> <p>Battery flags can be purchased from AndyMark or 3D printed.</p>"}]}